
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="Daily minute" />
<meta name="keywords" content="journal, blog">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="AI 编程时代，更加需要 BDD"/>
  <meta property="og:description" content="Daily minute"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./ai-bian-cheng-shi-dai-geng-jia-xu-yao-bdd.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2025-09-01 20:20:00+08:00"/>
  <meta property="article:modified_time" content="2025-09-01 22:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Journal"/>
  <meta property="article:tag" content="journal"/>
  <meta property="article:tag" content="blog"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; AI 编程时代，更加需要 BDD</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="ai-bian-cheng-shi-dai-geng-jia-xu-yao-bdd">AI 编程时代，更加需要 BDD</h1>
    <p>
      Posted on Mon 01 September 2025 in <a href="./category/journal.html">Journal</a>

    </p>
  </header>


  <div>
    <table>
<thead>
<tr>
<th><strong>Abstract</strong></th>
<th>AI 编程时代，更加需要 BDD</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authors</strong></td>
<td><a href="https://www.fanyamin.com">Walter Fan</a></td>
</tr>
<tr>
<td> <strong>Category</strong>  </td>
<td> learning note  </td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>v1.0</td>
</tr>
<tr>
<td><strong>Updated</strong></td>
<td>2025-09-01</td>
</tr>
<tr>
<td><strong>License</strong></td>
<td><a href="http://creativecommons.org/licenses/by-nc-nd/4.0">CC-BY-NC-ND 4.0</a></td>
</tr>
</tbody>
</table>
<h1 id="ai-bdd">AI 编程时代，更加需要 BDD</h1>
<p>最近在调试 AI 辅助编程的项目，突然有种“人已麻”的感觉——代码写得飞快，但是很不放心</p>
<ul>
<li>需求到底有没有理解对？</li>
<li>实现到底有没有偏差?</li>
<li>测试到底有没有覆盖重要的用例？</li>
</ul>
<p>这时候，我忽然想起一个老朋友：<strong>BDD（行为驱动开发）</strong>。</p>
<p>很多人听到 BDD，第一反应是：“啊？那不是多年前的东西了吗？怎么又火了？”没错！它确实不新，但<strong>AI 编程时代，它的重要性比以前高多了</strong></p>
<hr>
<h2 id="whatbdd">What：BDD，到底是什么？</h2>
<p>简单说，<strong>BDD 就是把需求和测试“人性化”地表达出来</strong>！
用一句话概括：<strong>“先讲故事，再写代码，再跑测试”</strong>。</p>
<p>想象一下，如果你的需求文档是这样的：</p>
<blockquote>
<p>用户点击按钮，系统弹出提示框</p>
</blockquote>
<p>你可能直接上手写前端逻辑，然后写单元测试……
但有了 BDD，你会先写 <strong>行为场景</strong>：</p>
<div class="highlight"><pre><span></span>场景：用户点击保存按钮
  假如用户填写了必填字段
  当用户点击保存
  那么系统应该显示“保存成功”的提示
</pre></div>


<p>是不是瞬间明白需求了？这就是 BDD 的魅力——<strong>人人都能读懂需求，代码和测试一条线走到底</strong>！</p>
<p>BDD的核心思想是：</p>
<ol>
<li><strong>从用户故事开始</strong>：以用户的角度描述功能需求</li>
<li><strong>使用自然语言</strong>：用Given-When-Then格式描述行为</li>
<li><strong>测试先行</strong>：先写测试，再写实现</li>
<li><strong>持续集成</strong>：确保代码质量</li>
</ol>
<hr>
<h2 id="why-ai-bdd">Why：为什么 AI 时代特别需要 BDD</h2>
<p><strong>以前，程序员慢慢写，产品慢慢催……需求总是对不上号</strong>
<strong>现在，AI 直接帮你写代码，生成测试，甚至还能改 bug</strong></p>
<p>听起来很爽，但问题来了：<strong>AI 能理解需求吗？</strong>
答案：不完全！AI 可以帮你写逻辑，但如果需求不清晰、场景没列全，它就可能写出“高大上”的垃圾代码……</p>
<p>这时候，BDD 就像一把“防火墙”：</p>
<ul>
<li><strong>需求更清晰</strong>：场景写好了，AI 按着场景生成代码和测试</li>
<li><strong>测试更容易</strong>：测试脚本和需求天然一致，bug 少了</li>
<li><strong>人人都是产品经理</strong>：不懂编码的人也能看懂场景，参与评审</li>
</ul>
<p>而 AI 在 BDD 流程中可以发挥重要作用：</p>
<ul>
<li><strong>需求分析</strong>：AI帮助理解和分析用户故事</li>
<li><strong>测试用例生成</strong>：AI根据用户故事自动生成测试用例</li>
<li><strong>代码生成</strong>：AI根据测试用例生成实现代码</li>
<li><strong>代码优化</strong>：AI帮助优化和重构代码</li>
</ul>
<h2 id="bddai">总之，有了 BDD，<strong>AI 代码不再是黑盒，而是“可验证的故事”</strong>！</h2>
<h2 id="howai-bdd">How：AI + BDD，怎么玩？</h2>
<p>现在流行用 <strong>Cucumber、Godog（Go 语言）</strong> 这类工具结合 BDD。流程大概是这样：</p>
<ol>
<li>
<p><strong>写需求场景</strong></p>
</li>
<li>
<p>使用“Given-When-Then”描述行为</p>
</li>
<li>
<p><strong>AI 生成代码</strong></p>
</li>
<li>
<p>可以直接生成功能实现或者测试桩</p>
</li>
<li>
<p><strong>运行测试验证</strong></p>
</li>
<li>
<p>自动检查功能是否符合场景</p>
</li>
<li>
<p><strong>迭代优化</strong></p>
</li>
<li>
<p>AI + BDD，让开发和测试同步进行</p>
</li>
</ol>
<p>简单一句话总结：<strong>写故事 → AI 写代码 → 自动验证 → 收获成就感</strong></p>
<hr>
<h2 id="example">Example：真实案例演示</h2>
<p>使用 <code>godog</code> 展示如何在 Go 语言中进行行为驱动开发（BDD）。
我们实现了一个简单的编码/解码器，支持 Base64、Hex 和 URL 编码。</p>
<p>Godog 是 Go 语言的 Cucumber 实现。它允许你用 Gherkin（<code>.feature</code> 文件）描述行为，并将每个步骤绑定到 Go 函数。Godog 执行这些场景并输出结果，使之成为可执行规格与验收测试。</p>
<p>常见使用方式：
- 作为独立 CLI 工具（直接运行特性）
- 集成到 <code>go test</code>（在测试套件内运行）</p>
<h3 id="_1">在本项目中的用法</h3>
<ul>
<li>功能文件位于 <code>bdd/*.feature</code></li>
<li>步骤定义与测试运行器位于 <code>bdd/encoder_steps_test.go</code></li>
<li>通过 <code>go test</code> 集成：构造 <code>godog.TestSuite</code> 并指向特性路径</li>
</ul>
<p>可选：安装 Godog CLI 直接运行</p>
<div class="highlight"><pre><span></span>go install github.com/cucumber/godog/cmd/godog@latest
# 在项目根目录下，运行 bdd/ 下的特性
godog bdd
</pre></div>


<h3 id="_2">项目结构</h3>
<div class="highlight"><pre><span></span>.
├── bdd
│   ├── encoder.feature          # 功能与场景（Gherkin）
│   └── encoder_steps_test.go    # 步骤定义 + 测试运行器
├── cmd
│   └── encoder
│       └── main.go              # 手动使用的命令行工具
├── pkg
│   └── encoder
│       └── encoder.go           # 编码/解码实现
└── go.mod
</pre></div>


<h3 id="gherkin">功能文件（Gherkin）</h3>
<p>行为在 <code>bdd/encoder.feature</code> 中描述：</p>
<div class="highlight"><pre><span></span>Feature: Encoding and decoding text
  As a user of the encoder tool
  I want to encode and decode strings using base64, hex, and url schemes
  So that I can transform text reliably

  Scenario Outline: Encode text
    Given I have the text &quot;&lt;plain&gt;&quot;
    When I encode using &quot;&lt;type&gt;&quot;
    Then the result should be &quot;&lt;encoded&gt;&quot;

    Examples:
      | type   | plain        | encoded                         |
      | base64 | hello world  | aGVsbG8gd29ybGQ=                |
      | hex    | hello        | 68656c6c6f                      |
      | url    | hello world! | hello+world%21                  |

  Scenario Outline: Decode text
    Given I have the text &quot;&lt;encoded&gt;&quot;
    When I decode using &quot;&lt;type&gt;&quot;
    Then the result should be &quot;&lt;plain&gt;&quot;

    Examples:
      | type   | encoded                         | plain        |
      | base64 | aGVsbG8gd29ybGQ=                | hello world  |
      | hex    | 68656c6c6f                      | hello        |
      | url    | hello+world%21                  | hello world! |
</pre></div>


<h3 id="bdd">运行 BDD 测试</h3>
<p>先决条件：
- Go 1.20+</p>
<p>安装依赖并运行测试：</p>
<div class="highlight"><pre><span></span>go test ./...
</pre></div>


<p>你会看到 Godog 套件执行并通过。</p>
<p>只运行 BDD 包：</p>
<div class="highlight"><pre><span></span>go test ./bdd -run TestGodog
</pre></div>


<h3 id="_3">命令行工具用法</h3>
<p>构建并运行编码器 CLI：</p>
<div class="highlight"><pre><span></span>go run ./cmd/encoder --mode encode --type base64 --text &quot;hello world&quot;
# 输出：aGVsbG8gd29ybGQ=

go run ./cmd/encoder --mode decode --type url --text &quot;hello+world%21&quot;
# 输出：hello world!
</pre></div>


<h3 id="bdd_1">BDD 如何指导实现</h3>
<ol>
<li>编写功能文件（可执行规范）</li>
<li>实现步骤定义，将 Gherkin 步骤绑定到 Go 代码</li>
<li>实现最小代码以使场景通过</li>
<li>在保持场景为绿色的同时进行重构</li>
</ol>
<p>该示例展示了紧密的反馈循环：特性文件阐明期望行为；步骤断言期望；代码演进直至满足行为。</p>
<h3 id="_4">参考</h3>
<ul>
<li>Godog: https://github.com/cucumber/godog</li>
<li>Cucumber BDD: https://cucumber.io/docs/bdd/</li>
</ul>
<p>完整代码参见 https://github.com/walterfan/kata-go/tree/master/kata/kata-bdd</p>
<h3 id="_5">总结一下</h3>
<p>AI 编程时代，<strong>代码变快了，但理解需求依然靠人</strong>。BDD 帮你把需求、测试、代码串起来，让 AI 真正成为你的“副手”，而不是“问题制造机”！</p>
<ul>
<li>BDD = 需求可读 + 测试自动化 + AI 驱动</li>
<li>场景写好，AI 不乱写</li>
<li>开发效率提升，bug 减少，心态稳稳的</li>
</ul>
<p>最后，送大家一句话：<strong>写故事，不只是程序员的浪漫，也是 AI 编程的安全阀！</strong></p>
<p><hr/>
本作品采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/journal.html">journal</a>
      <a href="./tag/blog.html">blog</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="./go-ying-yong-cheng-xu-de-dai-ma-zu-zhi.html" title="Go 应用程序的代码组织">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./go-ying-yong-cheng-xu-de-dai-ma-zu-zhi.html">Go 应用程序的代码组织</a></li>
      <li><a href="./context-in-go.html">Context in Go</a></li>
      <li><a href="./about-separation-of-concern.html">About separation of concern</a></li>
      <li><a href="./soc-code-structure-in-golang.html">SoC code structure in golang</a></li>
      <li><a href="./mdd-for-sre.html">MDD for SRE</a></li>
    </ul>
  </div>



<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>
</body>
</html>