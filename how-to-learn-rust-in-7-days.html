
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="Daily minute" />
<meta name="keywords" content="journal, blog">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="how to learn rust in 7 days"/>
  <meta property="og:description" content="Daily minute"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./how-to-learn-rust-in-7-days.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2025-08-17 20:20:00+08:00"/>
  <meta property="article:modified_time" content="2025-08-17 22:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Journal"/>
  <meta property="article:tag" content="journal"/>
  <meta property="article:tag" content="blog"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; how to learn rust in 7 days</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="how-to-learn-rust-in-7-days">how to learn rust in 7 days</h1>
    <p>
      Posted on Sun 17 August 2025 in <a href="./category/journal.html">Journal</a>

    </p>
  </header>


  <div>
    <table>
<thead>
<tr>
<th><strong>Abstract</strong></th>
<th>how to learn rust in 21 days</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authors</strong></td>
<td><a href="https://www.fanyamin.com">Walter Fan</a></td>
</tr>
<tr>
<td> <strong>Category</strong>  </td>
<td> learning note  </td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>v1.0</td>
</tr>
<tr>
<td><strong>Updated</strong></td>
<td>2025-08-17</td>
</tr>
<tr>
<td><strong>License</strong></td>
<td><a href="http://creativecommons.org/licenses/by-nc-nd/4.0">CC-BY-NC-ND 4.0</a></td>
</tr>
</tbody>
</table>
<blockquote>
<p>“Anyone who stops learning is old, whether at twenty or eighty. Anyone who keeps learning stays young.”
—— Henry Ford</p>
</blockquote>
<h2 id="how-to-learn-rust-in-7-days">"how to learn rust in 7 days"</h2>
<ul>
<li><a href="#how-to-learn-rust-in-7-days">"how to learn rust in 7 days"</a></li>
<li><a href="#一rust-的特点为什么学-rust">一、Rust 的特点（为什么学 Rust？）</a></li>
<li><a href="#二rust-vs-其他语言速查表">二、Rust vs 其他语言速查表</a></li>
<li><a href="#三七天学习计划">三、七天学习计划</a><ul>
<li><a href="#第一天环境与基础">第一天：环境与基础</a></li>
<li><a href="#第二天所有权与借用">第二天：所有权与借用</a></li>
<li><a href="#第三天结构体与枚举">第三天：结构体与枚举</a></li>
<li><a href="#第四天模式匹配与错误处理">第四天：模式匹配与错误处理</a></li>
<li><a href="#第五天泛型与-trait">第五天：泛型与 Trait</a></li>
<li><a href="#第六天并发与异步">第六天：并发与异步</a></li>
<li><a href="#第七天综合项目">第七天：综合项目</a></li>
<li><a href="#项目结构">项目结构</a></li>
<li><a href="#cargotoml"><code>Cargo.toml</code></a></li>
<li><a href="#srctodors"><code>src/todo.rs</code></a></li>
<li><a href="#srcmainrs"><code>src/main.rs</code></a></li>
<li><a href="#srctestsrs"><code>src/tests.rs</code></a></li>
<li><a href="#使用示例">使用示例</a></li>
</ul>
</li>
<li><a href="#reference">reference</a></li>
<li><a href="#daily-recitation-of-10-english-sentences">Daily recitation of 10 English sentences</a></li>
</ul>
<h3 id="rust-rust">一、Rust 的特点（为什么学 Rust？）</h3>
<ul>
<li><strong>零成本抽象</strong>：像 C++ 模板一样高效，但编译器帮你兜底。</li>
<li><strong>所有权 &amp; 借用</strong>：独特的内存安全模型，无需 GC（Java/Python）或手动释放（C++）。</li>
<li><strong>类型系统 &amp; 模式匹配</strong>：更强大、更严格，避免运行时错误。</li>
<li><strong>并发安全</strong>：编译器在编译期就能防止数据竞争。</li>
<li><strong>生态</strong>：Cargo（包管理 + 构建）、crates.io 丰富库。</li>
<li><strong>系统编程能力</strong>：能替代 C/C++，但语法更现代。</li>
</ul>
<hr>
<h3 id="rust-vs">二、Rust vs 其他语言速查表</h3>
<table>
<thead>
<tr>
<th>特性</th>
<th>Rust</th>
<th>C++</th>
<th>Java</th>
<th>Python</th>
<th>Go</th>
</tr>
</thead>
<tbody>
<tr>
<td>内存管理</td>
<td>所有权/借用，无 GC</td>
<td>手动 / 智能指针</td>
<td>GC</td>
<td>GC</td>
<td>GC</td>
</tr>
<tr>
<td>泛型/模板</td>
<td>强大，Trait bound</td>
<td>模板+概念 (C++20)</td>
<td>泛型 (Java 5+)</td>
<td>动态类型</td>
<td>泛型 (Go 1.18+)</td>
</tr>
<tr>
<td>并发模型</td>
<td>线程安全编译期检查</td>
<td>线程库 + 锁</td>
<td>多线程（锁、并发包）</td>
<td>GIL（限制多核并行）</td>
<td>Goroutines + Channel</td>
</tr>
<tr>
<td>包管理</td>
<td>Cargo + crates.io</td>
<td>vcpkg/conan 等</td>
<td>Maven/Gradle</td>
<td>pip, poetry, uv</td>
<td>go mod</td>
</tr>
<tr>
<td>错误处理</td>
<td><code>Result&lt;T,E&gt;</code> + <code>?</code></td>
<td>异常</td>
<td>异常</td>
<td>异常</td>
<td>error 返回值</td>
</tr>
<tr>
<td>编译速度</td>
<td>较慢</td>
<td>中等</td>
<td>较快（JIT启动慢）</td>
<td>快（解释执行）</td>
<td>很快</td>
</tr>
<tr>
<td>运行性能</td>
<td>接近 C++</td>
<td>极高</td>
<td>较高（JVM 优化）</td>
<td>中等（解释/优化有限）</td>
<td>高（接近 C）</td>
</tr>
<tr>
<td>应用场景</td>
<td>系统编程、Web、并发安全</td>
<td>系统、游戏、内核</td>
<td>企业应用、服务端</td>
<td>脚本、数据科学</td>
<td>云原生、后端服务</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="_1">三、七天学习计划</h3>
<h4 id="_2">第一天：环境与基础</h4>
<ul>
<li><strong>目标</strong>：安装 Rust，写 Hello World，理解 Cargo。</li>
<li><strong>内容</strong>：变量、不可变 &amp; 可变、函数、if/loop/match。</li>
<li><strong>示例</strong>：FizzBuzz。</li>
</ul>
<p>目标：环境搭建，变量、函数、打印。</p>
<div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 变量与不可变性</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Rust&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hello, {}!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 可变变量</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..=</span><span class="mi">5</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">counter</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Sum of 1..=5 = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">counter</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 函数调用</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Factorial(5) = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<hr>
<h4 id="_3">第二天：所有权与借用</h4>
<ul>
<li><strong>目标</strong>：掌握 Rust 的核心思想：所有权、借用、生命周期。</li>
<li><strong>内容</strong>：move、clone、&amp;借用、可变借用。</li>
<li><strong>示例</strong>：统计字符串中不同单词的数量（HashMap）。</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;ownership&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">takes_ownership</span><span class="p">(</span><span class="n">s1</span><span class="p">);</span><span class="w"> </span><span class="c1">// s1 被 move</span>
<span class="w">    </span><span class="c1">// println!(&quot;{}&quot;, s1); // ❌ 会报错</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;borrowing&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_length</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s2</span><span class="p">);</span><span class="w"> </span><span class="c1">// 传引用</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Length of &#39;{}&#39; is {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// slice 示例</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first_word</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s2</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;First word in &#39;{}&#39; is &#39;{}&#39;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">takes_ownership</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Got string: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">calculate_length</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">len</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">first_word</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">enumerate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">b&#39; &#39;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="n">i</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="o">..</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>


<hr>
<h4 id="_4">第三天：结构体与枚举</h4>
<ul>
<li><strong>目标</strong>：学习数据建模方式。</li>
<li><strong>内容</strong>：<code>struct</code>、<code>enum</code>、<code>impl</code> 方法、<code>Option</code>/<code>Result</code>。</li>
<li><strong>示例</strong>：实现一个简易银行账户（存款/取款）。</li>
</ul>
<div class="highlight"><pre><span></span><span class="cp">#[derive(Debug)]</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Rectangle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">area</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">height</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">enum</span><span class="w"> </span><span class="nc">Shape</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Circle</span><span class="p">(</span><span class="kt">f64</span><span class="p">),</span>
<span class="w">    </span><span class="n">Rect</span><span class="p">(</span><span class="n">Rectangle</span><span class="p">),</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rectangle</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Rectangle {:?}, area = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">area</span><span class="p">());</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Shape</span><span class="p">::</span><span class="n">Circle</span><span class="p">(</span><span class="mf">3.0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">rect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Shape</span><span class="p">::</span><span class="n">Rect</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>

<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Shape</span><span class="p">::</span><span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Circle area = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="kt">f64</span><span class="p">::</span><span class="n">consts</span><span class="p">::</span><span class="n">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">radius</span><span class="p">),</span>
<span class="w">        </span><span class="n">Shape</span><span class="p">::</span><span class="n">Rect</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Rectangle area = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">area</span><span class="p">()),</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">rect</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Shape</span><span class="p">::</span><span class="n">Circle</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{}</span>
<span class="w">        </span><span class="n">Shape</span><span class="p">::</span><span class="n">Rect</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Matched rect with area {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rec</span><span class="p">.</span><span class="n">area</span><span class="p">()),</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<hr>
<h4 id="_5">第四天：模式匹配与错误处理</h4>
<ul>
<li><strong>目标</strong>：熟练使用 <code>match</code>、<code>if let</code>、<code>?</code>。</li>
<li><strong>内容</strong>：错误传播、unwrap、expect。</li>
<li><strong>示例</strong>：实现文件读取，统计文件中每个单词出现的次数。</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">io</span><span class="p">::{</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">Read</span><span class="p">};</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">File</span><span class="p">::</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w"> </span><span class="c1">// ? 自动传播错误</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="n">read_to_string</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">contents</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Cargo.toml&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Read {}:</span><span class="se">\n</span><span class="s">{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p">),</span>
<span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Error reading {}: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">),</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Option 示例</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">];</span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">numbers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Got value {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">),</span>
<span class="w">        </span><span class="nb">None</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;No value&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<hr>
<h4 id="trait">第五天：泛型与 Trait</h4>
<ul>
<li><strong>目标</strong>：掌握泛型与 Trait 系统。</li>
<li><strong>内容</strong>：<code>impl&lt;T&gt;</code>、Trait bound、常见 Trait（Display、Debug）。</li>
<li><strong>示例</strong>：实现一个泛型的二叉搜索树。</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">Display</span><span class="p">;</span>

<span class="c1">// 泛型函数</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">largest</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span><span class="w"> </span><span class="nb">PartialOrd</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Copy</span><span class="o">&gt;</span><span class="p">(</span><span class="n">list</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="n">T</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">&amp;</span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">max</span>
<span class="p">}</span>

<span class="c1">// Trait 定义与实现</span>
<span class="k">trait</span><span class="w"> </span><span class="n">Summary</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">summarize</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">News</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Summary</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">News</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">summarize</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">format!</span><span class="p">(</span><span class="s">&quot;News: {}...&quot;</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">title</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">notify</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span><span class="w"> </span><span class="nc">Summary</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Display</span><span class="o">&gt;</span><span class="p">(</span><span class="n">item</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Breaking: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">summarize</span><span class="p">());</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">nums</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">34</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">];</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Largest number = {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">largest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">nums</span><span class="p">));</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">news</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">News</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;Rust 1.80 Released&quot;</span><span class="p">),</span>
<span class="w">        </span><span class="n">content</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="s">&quot;Memory safety and performance improvements...&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">news</span><span class="p">.</span><span class="n">summarize</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>


<hr>
<h4 id="_6">第六天：并发与异步</h4>
<ul>
<li><strong>目标</strong>：体验 Rust 的线程安全与 async。</li>
<li><strong>内容</strong>：<code>std::thread</code>、<code>Arc&lt;Mutex&lt;T&gt;&gt;</code>、Tokio async。</li>
<li><strong>示例</strong>：并发下载网页并统计响应大小。</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">thread</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">time</span><span class="p">::</span><span class="n">Duration</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">tokio</span><span class="p">::</span><span class="n">time</span><span class="p">;</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 多线程示例</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">handles</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="o">..=</span><span class="mi">3</span><span class="p">).</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">i</span><span class="o">|</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">thread</span><span class="p">::</span><span class="n">spawn</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Thread {} started&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">            </span><span class="n">thread</span><span class="p">::</span><span class="n">sleep</span><span class="p">(</span><span class="n">Duration</span><span class="p">::</span><span class="n">from_secs</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Thread {} done&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}).</span><span class="n">collect</span><span class="p">();</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">handles</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">h</span><span class="p">.</span><span class="n">join</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Async 示例（需 tokio runtime）</span>
<span class="w">    </span><span class="n">tokio_main</span><span class="p">();</span>
<span class="p">}</span>

<span class="cp">#[tokio::main]</span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">tokio_main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">tokio</span><span class="p">::</span><span class="n">join</span><span class="o">!</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">task</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Task {} started&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="w">    </span><span class="n">time</span><span class="p">::</span><span class="n">sleep</span><span class="p">(</span><span class="n">Duration</span><span class="p">::</span><span class="n">from_secs</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="k">await</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Task {} finished&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<hr>
<h4 id="_7">第七天：综合项目</h4>
<ul>
<li><strong>目标</strong>：将前面知识整合到一个小项目中。</li>
<li><strong>内容</strong>：CLI 工具，模块化，错误处理，测试。</li>
<li><strong>示例</strong>：实现一个简易命令行 Todo 应用。</li>
</ul>
<h5 id="_8">项目结构</h5>
<div class="highlight"><pre><span></span>todo_app/
├── Cargo.toml
└── src
    ├── main.rs
    ├── todo.rs
    └── tests.rs
</pre></div>


<hr>
<h5 id="cargotoml"><code>Cargo.toml</code></h5>
<div class="highlight"><pre><span></span><span class="k">[package]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;todo_app&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>
<span class="n">edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2021&quot;</span>

<span class="k">[dependencies]</span>
<span class="n">clap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;4.5&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">serde</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;derive&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="n">serde_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
</pre></div>


<hr>
<h5 id="srctodors"><code>src/todo.rs</code></h5>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">serde</span><span class="p">::{</span><span class="n">Serialize</span><span class="p">,</span><span class="w"> </span><span class="n">Deserialize</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">fs</span><span class="p">::{</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">OpenOptions</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">io</span><span class="p">::{</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">Write</span><span class="p">};</span>

<span class="cp">#[derive(Serialize, Deserialize, Debug)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Todo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">done</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">FILE</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;todo.json&quot;</span><span class="p">;</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">load_todos</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fs</span><span class="p">::</span><span class="n">read_to_string</span><span class="p">(</span><span class="n">FILE</span><span class="p">).</span><span class="n">unwrap_or</span><span class="p">(</span><span class="s">&quot;[]&quot;</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="n">serde_json</span><span class="p">::</span><span class="n">from_str</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">).</span><span class="n">unwrap_or_else</span><span class="p">(</span><span class="o">|</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[])</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">save_todos</span><span class="p">(</span><span class="n">todos</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Todo</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serde_json</span><span class="p">::</span><span class="n">to_string_pretty</span><span class="p">(</span><span class="n">todos</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OpenOptions</span><span class="p">::</span><span class="n">new</span><span class="p">().</span><span class="n">write</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="n">create</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="n">truncate</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="n">open</span><span class="p">(</span><span class="n">FILE</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">write_all</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">())</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">add_task</span><span class="p">(</span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load_todos</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todos</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="n">todos</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">Todo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">:</span><span class="w"> </span><span class="nc">false</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="n">save_todos</span><span class="p">(</span><span class="o">&amp;</span><span class="n">todos</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">list_tasks</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load_todos</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">todo</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span>
<span class="w">            </span><span class="s">&quot;{}. [{}] {}&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="n">todo</span><span class="p">.</span><span class="n">id</span><span class="p">,</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">todo</span><span class="p">.</span><span class="n">done</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;x&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">            </span><span class="n">todo</span><span class="p">.</span><span class="n">task</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">complete_task</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">io</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load_todos</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">todo</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todos</span><span class="p">.</span><span class="n">iter_mut</span><span class="p">().</span><span class="n">find</span><span class="p">(</span><span class="o">|</span><span class="n">t</span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">todo</span><span class="p">.</span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">save_todos</span><span class="p">(</span><span class="o">&amp;</span><span class="n">todos</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<hr>
<h5 id="srcmainrs"><code>src/main.rs</code></h5>
<div class="highlight"><pre><span></span><span class="k">mod</span><span class="w"> </span><span class="nn">todo</span><span class="p">;</span>

<span class="k">use</span><span class="w"> </span><span class="n">clap</span><span class="p">::{</span><span class="n">Parser</span><span class="p">,</span><span class="w"> </span><span class="n">Subcommand</span><span class="p">};</span>

<span class="cp">#[derive(Parser)]</span>
<span class="cp">#[command(name = </span><span class="s">&quot;todo&quot;</span><span class="cp">)]</span>
<span class="cp">#[command(about = </span><span class="s">&quot;A simple CLI Todo app in Rust&quot;</span><span class="cp">, long_about = None)]</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Cli</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#[command(subcommand)]</span>
<span class="w">    </span><span class="n">command</span><span class="p">:</span><span class="w"> </span><span class="nc">Commands</span><span class="p">,</span>
<span class="p">}</span>

<span class="cp">#[derive(Subcommand)]</span>
<span class="k">enum</span><span class="w"> </span><span class="nc">Commands</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="sd">/// Add a new todo task</span>
<span class="w">    </span><span class="n">Add</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="sd">/// List all tasks</span>
<span class="w">    </span><span class="n">List</span><span class="p">,</span>
<span class="w">    </span><span class="sd">/// Mark a task as completed</span>
<span class="w">    </span><span class="n">Done</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="w"> </span><span class="p">},</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Cli</span><span class="p">::</span><span class="n">parse</span><span class="p">();</span>

<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">cli</span><span class="p">.</span><span class="n">command</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Commands</span><span class="p">::</span><span class="n">Add</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">add_task</span><span class="p">(</span><span class="n">task</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">&quot;Error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">Commands</span><span class="p">::</span><span class="n">List</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">todo</span><span class="p">::</span><span class="n">list_tasks</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">Commands</span><span class="p">::</span><span class="n">Done</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">complete_task</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">&quot;Error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<hr>
<h5 id="srctestsrs"><code>src/tests.rs</code></h5>
<div class="highlight"><pre><span></span><span class="cp">#[cfg(test)]</span>
<span class="k">mod</span><span class="w"> </span><span class="nn">tests</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">use</span><span class="w"> </span><span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="n">todo</span><span class="p">;</span>

<span class="w">    </span><span class="cp">#[test]</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">test_add_and_list</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">add_task</span><span class="p">(</span><span class="s">&quot;Learn Rust&quot;</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">load_todos</span><span class="p">();</span>
<span class="w">        </span><span class="fm">assert!</span><span class="p">(</span><span class="n">todos</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">any</span><span class="p">(</span><span class="o">|</span><span class="n">t</span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">task</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Learn Rust&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="cp">#[test]</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">test_complete</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">add_task</span><span class="p">(</span><span class="s">&quot;Write tests&quot;</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">load_todos</span><span class="p">();</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todos</span><span class="p">.</span><span class="n">last</span><span class="p">().</span><span class="n">unwrap</span><span class="p">().</span><span class="n">id</span><span class="p">;</span>

<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">complete_task</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">todos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">todo</span><span class="p">::</span><span class="n">load_todos</span><span class="p">();</span>
<span class="w">        </span><span class="fm">assert!</span><span class="p">(</span><span class="n">todos</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">find</span><span class="p">(</span><span class="o">|</span><span class="n">t</span><span class="o">|</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">id</span><span class="p">).</span><span class="n">unwrap</span><span class="p">().</span><span class="n">done</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<hr>
<h5 id="_9">使用示例</h5>
<div class="highlight"><pre><span></span>$<span class="w"> </span>cargo<span class="w"> </span>run<span class="w"> </span>--<span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;Learn Rust&quot;</span>
$<span class="w"> </span>cargo<span class="w"> </span>run<span class="w"> </span>--<span class="w"> </span>add<span class="w"> </span><span class="s2">&quot;Build a CLI app&quot;</span>
$<span class="w"> </span>cargo<span class="w"> </span>run<span class="w"> </span>--<span class="w"> </span>list
<span class="m">1</span>.<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Learn<span class="w"> </span>Rust
<span class="m">2</span>.<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Build<span class="w"> </span>a<span class="w"> </span>CLI<span class="w"> </span>app
$<span class="w"> </span>cargo<span class="w"> </span>run<span class="w"> </span>--<span class="w"> </span><span class="k">done</span><span class="w"> </span><span class="m">1</span>
$<span class="w"> </span>cargo<span class="w"> </span>run<span class="w"> </span>--<span class="w"> </span>list
<span class="m">1</span>.<span class="w"> </span><span class="o">[</span>x<span class="o">]</span><span class="w"> </span>Learn<span class="w"> </span>Rust
<span class="m">2</span>.<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Build<span class="w"> </span>a<span class="w"> </span>CLI<span class="w"> </span>app
</pre></div>


<h3 id="reference">reference</h3>
<ul>
<li><a href="https://doc.rust-lang.org/book/">The Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/">Rust by Example</a></li>
<li><a href="https://github.com/rust-lang/rustlings">Rustlings</a></li>
</ul>
<h2 id="daily-recitation-of-10-english-sentences">Daily recitation of 10 English sentences</h2>
<ol>
<li><strong>"We need to align our efforts toward a common goal."</strong></li>
<li>
<p>解释：这句话强调团队合作的重要性。"align our efforts" 意味着让每个人的努力方向一致，确保所有人都朝着同一个目标前进。</p>
</li>
<li>
<p><strong>"Let's take a step back and assess the situation objectively."</strong></p>
</li>
<li>
<p>解释：当你遇到复杂问题时，建议大家暂停下来冷静分析现状。"take a step back" 是一个常用的表达，意思是“退一步看问题”。</p>
</li>
<li>
<p><strong>"This proposal has been thoroughly reviewed by the technical team."</strong></p>
</li>
<li>
<p>解释：在正式汇报前，先确认方案已经经过充分讨论和评估。“thoroughly” 表示“彻底地、全面地”。</p>
</li>
<li>
<p><strong>"I’d like to propose an alternative approach to solve this challenge."</strong></p>
</li>
<li>
<p>解释：提出新思路时，礼貌地使用“propose”这个词，体现尊重他人的态度。“alternative approach” 是“替代方案”的意思。</p>
</li>
<li>
<p><strong>"The timeline seems unrealistic given the current constraints."</strong></p>
</li>
<li>
<p>解释：指出项目计划可能存在不合理之处。"unrealistic" 表示“不现实的”，而 "constraints" 则指“限制条件”。</p>
</li>
<li>
<p><strong>"Can we prioritize tasks based on urgency and impact?"</strong></p>
</li>
<li>
<p>解释：合理安排优先级是高效工作的关键。“urgency” 和 “impact” 是两个重要的考量维度。</p>
</li>
<li>
<p><strong>"We should establish clear communication channels between departments."</strong></p>
</li>
<li>
<p>解释：跨部门协作离不开顺畅的信息传递。“communication channels” 指的就是沟通渠道。</p>
</li>
<li>
<p><strong>"It’s crucial that we document everything clearly for future reference."</strong></p>
</li>
<li>
<p>解释：文档化非常重要，特别是在团队成员变动或后续维护时。“document everything clearly” 强调清晰准确的记录。</p>
</li>
<li>
<p><strong>"What are the potential risks associated with this implementation?"</strong></p>
</li>
<li>
<p>解释：风险评估是项目管理中的重要环节。这个问题可以帮助我们提前识别隐患。</p>
</li>
<li>
<p><strong>"Let’s schedule a follow-up meeting to review the progress next week."</strong></p>
<ul>
<li>解释：定期回顾有助于持续改进。“follow-up meeting” 是“跟进会议”的说法，适合用来安排后续讨论。</li>
</ul>
</li>
</ol>
<p><hr/>
本作品采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/journal.html">journal</a>
      <a href="./tag/blog.html">blog</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="./chatgptdu-zhi-dao-wo-men-huan-yao-du-shu-xie-shu-ma.html" title="chatgpt都知道, 我们还要读书写书吗">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="./ending-tls-client-authentication-certificate.html" title="Ending TLS Client Authentication Certificate">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./mdd-for-sre.html">MDD for SRE</a></li>
      <li><a href="./ending-tls-client-authentication-certificate.html">Ending TLS Client Authentication Certificate</a></li>
      <li><a href="./chatgptdu-zhi-dao-wo-men-huan-yao-du-shu-xie-shu-ma.html">chatgpt都知道, 我们还要读书写书吗</a></li>
      <li><a href="./cheng-xu-yuan-ba-ba-xie-gei-nu-er-de-qi-feng-xin.html">程序员爸爸写给女儿的七封信</a></li>
      <li><a href="./ru-he-ying-dui-yi-tuan-luan-ma.html">如何应对一团乱码</a></li>
    </ul>
  </div>



<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>
</body>
</html>