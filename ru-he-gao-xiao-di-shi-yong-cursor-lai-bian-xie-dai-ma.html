
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="Daily minute" />
<meta name="keywords" content="journal, blog">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="如何高效地使用 Cursor 来编写代码"/>
  <meta property="og:description" content="Daily minute"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./ru-he-gao-xiao-di-shi-yong-cursor-lai-bian-xie-dai-ma.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2025-10-21 20:20:00+08:00"/>
  <meta property="article:modified_time" content="2025-10-21 22:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Journal"/>
  <meta property="article:tag" content="journal"/>
  <meta property="article:tag" content="blog"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; 如何高效地使用 Cursor 来编写代码</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="ru-he-gao-xiao-di-shi-yong-cursor-lai-bian-xie-dai-ma">如何高效地使用 Cursor 来编写代码</h1>
    <p>
      Posted on Tue 21 October 2025 in <a href="./category/journal.html">Journal</a>

    </p>
  </header>


  <div>
    <table>
<thead>
<tr>
<th><strong>Abstract</strong></th>
<th>如何高效地使用 Cursor 来编写代码</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authors</strong></td>
<td><a href="https://www.fanyamin.com">Walter Fan</a></td>
</tr>
<tr>
<td> <strong>Category</strong>  </td>
<td> learning note  </td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>v1.0</td>
</tr>
<tr>
<td><strong>Updated</strong></td>
<td>2025-10-21</td>
</tr>
<tr>
<td><strong>License</strong></td>
<td><a href="http://creativecommons.org/licenses/by-nc-nd/4.0">CC-BY-NC-ND 4.0</a></td>
</tr>
</tbody>
</table>
<h2 id="cursor">一、初识 Cursor：不只是个编辑器</h2>
<p>说实话，第一次用 Cursor 的时候，我以为它就是个套了个 AI 壳的 VSCode。结果用了一周后，我发现自己回不去了。</p>
<p>这感觉就像当年从记事本升级到 IDE，从手动档换到自动档，从算盘升级到计算器——技术的进步让你意识到，原来写代码还能这么爽。</p>
<p>Cursor 本质上是一个深度集成了 AI 能力的代码编辑器。它基于 VSCode 构建，所以 VSCode 的插件、快捷键、配置都能无缝迁移。但它的核心价值在于：<strong>AI 不再是个外挂工具，而是编程流程的原生伙伴</strong>。</p>
<p><img alt="Cursor 编辑器界面，展示代码补全和 AI 对话窗口" src="https://images.unsplash.com/photo-1555066931-4365d14bab8c"></p>
<h3 id="11-cursor">1.1 Cursor 的核心能力</h3>
<p><strong>Tab 自动补全（Copilot++）</strong></p>
<p>这是最基础也最常用的功能。你写一行代码，按 Tab，AI 就把后面的补上了。但 Cursor 的补全比普通 Copilot 更智能，因为它能读懂你整个项目的上下文。</p>
<p>举个例子，我在写一个 Redis 连接池，刚定义完配置结构体：</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">RedisConfig</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">Host</span><span class="w">     </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">Port</span><span class="w">     </span><span class="kt">int</span>
<span class="w">    </span><span class="nx">Password</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="nx">DB</span><span class="w">       </span><span class="kt">int</span>
<span class="w">    </span><span class="nx">PoolSize</span><span class="w"> </span><span class="kt">int</span>
<span class="p">}</span>
</code></pre></div>

<p>然后我开始写初始化函数：</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewRedisClient</span><span class="p">(</span><span class="nx">cfg</span><span class="w"> </span><span class="nx">RedisConfig</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">redis</span><span class="p">.</span><span class="nx">Client</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 按下 Tab，Cursor 自动补全了整个函数体</span>
<span class="w">    </span><span class="nx">client</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">redis</span><span class="p">.</span><span class="nx">NewClient</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">redis</span><span class="p">.</span><span class="nx">Options</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Addr</span><span class="p">:</span><span class="w">     </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Sprintf</span><span class="p">(</span><span class="s">&quot;%s:%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">Host</span><span class="p">,</span><span class="w"> </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">Port</span><span class="p">),</span>
<span class="w">        </span><span class="nx">Password</span><span class="p">:</span><span class="w"> </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">Password</span><span class="p">,</span>
<span class="w">        </span><span class="nx">DB</span><span class="p">:</span><span class="w">       </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">DB</span><span class="p">,</span>
<span class="w">        </span><span class="nx">PoolSize</span><span class="p">:</span><span class="w"> </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">PoolSize</span><span class="p">,</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">Ping</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">()).</span><span class="nx">Result</span><span class="p">()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;failed to connect to redis: %w&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">client</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div>

<p>这种"心有灵犀"的感觉，真的会上瘾。</p>
<p><strong>Cmd+K 行内编辑（最爱功能）</strong></p>
<p>这是我用得最多的功能。选中一段代码，按 <code>Cmd+K</code>（Mac）或 <code>Ctrl+K</code>（Windows），输入你的需求，AI 就地修改代码。</p>
<p>比如我有个函数写得太长了，想拆分：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 选中这个臃肿的函数，按 Cmd+K</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_user_data</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="c1"># 100 行代码...</span>
    <span class="k">pass</span>

<span class="c1"># 输入 prompt：&quot;把这个函数按职责拆分成多个小函数&quot;</span>
<span class="c1"># AI 自动重构成：</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fetch_user_from_db</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="c1"># ...</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_user_data</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="c1"># ...</span>

<span class="k">def</span><span class="w"> </span><span class="nf">transform_user_data</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="c1"># ...</span>

<span class="k">def</span><span class="w"> </span><span class="nf">process_user_data</span><span class="p">(</span><span class="n">user_id</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">fetch_user_from_db</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">validate_user_data</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">transform_user_data</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</code></pre></div>

<p>这比手动重构省事太多了。</p>
<p><strong>Cmd+L AI 对话（结对编程伙伴）</strong></p>
<p>这个功能打开一个 AI 聊天面板，你可以问它任何问题。关键是，它能看到你当前打开的文件，甚至能主动帮你修改代码。</p>
<p>实际场景：我在写一个分布式锁的实现，卡在续期逻辑上了。</p>
<div class="highlight"><pre><span></span><code>我：这个锁的续期逻辑有问题，在高并发场景下可能会失效，帮我看看

Cursor：我看到了问题。你的续期是在锁即将过期时才触发，
但如果业务逻辑执行时间不确定，可能来不及续期。
建议改用后台 goroutine 定时续期。我来帮你改。
</code></pre></div>

<p>然后它直接在代码里插入了一个优化版本。这种体验就像有个资深程序员坐在旁边，随时可以讨论。</p>
<p><img alt="结对编程" src="https://images.unsplash.com/photo-1522071820081-009f0129c71c"></p>
<h2 id="cursor_1">二、让 Cursor 更懂你的项目：文档驱动开发</h2>
<p>AI 再聪明，也需要"投喂"足够的上下文。这就像你带一个新人，如果项目文档完善，他上手就快；如果文档一团糟，神仙也帮不了你。</p>
<h3 id="21-ai">2.1 设计文档：告诉 AI 你要做什么</h3>
<p>我现在开始一个新项目或模块时，第一件事不是写代码，而是写设计文档。放在项目根目录的 <code>docs/design/</code> 里。</p>
<p><strong>示例设计文档结构：</strong></p>
<div class="highlight"><pre><span></span><code><span class="gh"># User Service 设计文档</span>

<span class="gu">## 1. 背景</span>
现有的用户服务性能不足，需要重构为微服务架构

<span class="gu">## 2. 目标</span>
<span class="k">-</span><span class="w"> </span>支持 10 万 QPS
<span class="k">-</span><span class="w"> </span>可水平扩展
<span class="k">-</span><span class="w"> </span>数据最终一致性

<span class="gu">## 3. 架构设计</span>
<span class="gu">### 3.1 整体架构</span>
[放一张架构图]

<span class="gu">### 3.2 核心模块</span>
<span class="k">-</span><span class="w"> </span>UserRepository: 数据访问层，支持 MySQL 和 Redis
<span class="k">-</span><span class="w"> </span>UserService: 业务逻辑层
<span class="k">-</span><span class="w"> </span>UserAPI: HTTP API 层

<span class="gu">## 4. 接口定义</span>
<span class="gu">### 4.1 创建用户</span>
POST /api/v1/users
Request: { &quot;name&quot;: &quot;xxx&quot;, &quot;email&quot;: &quot;xxx&quot; }
Response: { &quot;id&quot;: &quot;xxx&quot;, &quot;created_at&quot;: &quot;xxx&quot; }

<span class="gu">## 5. 数据模型</span>
...

<span class="gu">## 6. 技术选型</span>
<span class="k">-</span><span class="w"> </span>语言: Go 1.21
<span class="k">-</span><span class="w"> </span>框架: Gin
<span class="k">-</span><span class="w"> </span>数据库: MySQL 8.0 + Redis 7.0
<span class="k">-</span><span class="w"> </span>消息队列: Kafka
</code></pre></div>

<p>有了这个文档，我就可以跟 Cursor 说：</p>
<div class="highlight"><pre><span></span><code>我：按照 docs/design/user-service.md 的设计，帮我实现 UserRepository 接口
</code></pre></div>

<p>Cursor 会读取设计文档，然后生成符合设计的代码。这比你口头描述需求准确多了。</p>
<h3 id="22">2.2 编码规范：统一代码风格</h3>
<p>在项目根目录放一个 <code>.cursorrules</code> 文件，定义你的编码规范。Cursor 会自动遵守这些规则。</p>
<p><strong>我的 <code>.cursorrules</code> 示例：</strong></p>
<div class="highlight"><pre><span></span><code><span class="gh"># 项目编码规范</span>

<span class="gu">## 代码风格</span>
<span class="k">-</span><span class="w"> </span>使用 Go 官方风格指南
<span class="k">-</span><span class="w"> </span>函数名使用驼峰命名
<span class="k">-</span><span class="w"> </span>接口名以 -er 结尾（如 Reader, Writer）
<span class="k">-</span><span class="w"> </span>常量全大写，用下划线分隔（如 MAX_RETRY_COUNT）

<span class="gu">## 错误处理</span>
<span class="k">-</span><span class="w"> </span>必须处理所有 error，不允许忽略
<span class="k">-</span><span class="w"> </span>错误信息使用 fmt.Errorf 包装，携带上下文
<span class="k">-</span><span class="w"> </span>自定义错误使用 errors.New 或实现 error 接口

<span class="gu">## 注释规范</span>
<span class="k">-</span><span class="w"> </span>导出的函数必须有注释，以函数名开头
<span class="k">-</span><span class="w"> </span>复杂逻辑必须有行内注释
<span class="k">-</span><span class="w"> </span>TODO/FIXME/HACK 必须标注原因和负责人

<span class="gu">## 测试规范</span>
<span class="k">-</span><span class="w"> </span>每个公开函数都要有单元测试
<span class="k">-</span><span class="w"> </span>测试函数名格式：TestFunctionName_Scenario_ExpectedResult
<span class="k">-</span><span class="w"> </span>使用 testify 库做断言
<span class="k">-</span><span class="w"> </span>表驱动测试（Table-Driven Tests）优先

<span class="gu">## 依赖管理</span>
<span class="k">-</span><span class="w"> </span>禁止引入未经评审的第三方库
<span class="k">-</span><span class="w"> </span>使用 go mod 管理依赖
<span class="k">-</span><span class="w"> </span>定期更新依赖，修复安全漏洞

<span class="gu">## Git 提交</span>
<span class="k">-</span><span class="w"> </span>提交信息格式：&lt;type&gt;: &lt;subject&gt;
<span class="k">-</span><span class="w"> </span>type: feat/fix/docs/refactor/test/chore
<span class="k">-</span><span class="w"> </span>一次提交只做一件事
</code></pre></div>

<p>有了这个规范，Cursor 生成的代码风格就很统一了。团队协作时尤其有用。</p>
<p><img alt="代码规范文档" src="https://images.unsplash.com/photo-1516116216624-53e697fedbea"></p>
<h3 id="23-ai">2.3 上下文注释：给 AI 留"面包屑"</h3>
<p>代码注释不只是给人看的，也是给 AI 看的。我现在写代码会有意识地加一些"导航注释"。</p>
<p><strong>不好的注释：</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 获取用户</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">GetUser</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>好的注释：</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// GetUser 根据用户 ID 从数据库获取用户信息</span>
<span class="c1">// 查询顺序：1. 先查 Redis 缓存 2. 缓存未命中再查 MySQL 3. 写回缓存</span>
<span class="c1">// 缓存过期时间：5 分钟</span>
<span class="c1">// 错误场景：用户不存在返回 ErrUserNotFound，数据库错误返回原始 error</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">GetUser</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>

<p>这样 Cursor 在补全相关代码时，就知道你的设计意图了。</p>
<h2 id="ai">三、测试驱动开发：让 AI 帮你写测试</h2>
<p>TDD（Test-Driven Development）和 BDD（Behavior-Driven Development）在 Cursor 里特别好用，因为 AI 擅长写测试。</p>
<h3 id="31-tdd">3.1 TDD 工作流</h3>
<p>我现在的开发流程是：</p>
<p><strong>1. 先写测试</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// user_service_test.go</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">TestUserService_CreateUser_Success</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Given: 准备测试数据</span>
<span class="w">    </span><span class="nx">service</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">NewUserService</span><span class="p">(</span><span class="nx">mockDB</span><span class="p">,</span><span class="w"> </span><span class="nx">mockCache</span><span class="p">)</span>
<span class="w">    </span><span class="nx">req</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">CreateUserRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;张三&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">Email</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zhangsan@example.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// When: 执行被测试的方法</span>
<span class="w">    </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">service</span><span class="p">.</span><span class="nx">CreateUser</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">(),</span><span class="w"> </span><span class="nx">req</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Then: 验证结果</span>
<span class="w">    </span><span class="nx">assert</span><span class="p">.</span><span class="nx">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="nx">assert</span><span class="p">.</span><span class="nx">NotEmpty</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">ID</span><span class="p">)</span>
<span class="w">    </span><span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张三&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">Name</span><span class="p">)</span>
<span class="w">    </span><span class="nx">assert</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;zhangsan@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">Email</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>2. 让 Cursor 生成实现</strong></p>
<p>选中测试代码，按 <code>Cmd+L</code>，输入：</p>
<div class="highlight"><pre><span></span><code>根据这个测试用例，帮我实现 CreateUser 方法
</code></pre></div>

<p>Cursor 会分析测试逻辑，生成符合测试预期的代码：</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">UserService</span><span class="p">)</span><span class="w"> </span><span class="nx">CreateUser</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">CreateUserRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. 参数校验</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">Email</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">&quot;name and email are required&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 2. 检查邮箱是否已存在</span>
<span class="w">    </span><span class="nx">exists</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">CheckEmailExists</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">Email</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;failed to check email: %w&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">exists</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">ErrEmailAlreadyExists</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 3. 创建用户</span>
<span class="w">    </span><span class="nx">user</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span>
<span class="w">        </span><span class="nx">ID</span><span class="p">:</span><span class="w">        </span><span class="nx">uuid</span><span class="p">.</span><span class="nx">New</span><span class="p">().</span><span class="nx">String</span><span class="p">(),</span>
<span class="w">        </span><span class="nx">Name</span><span class="p">:</span><span class="w">      </span><span class="nx">req</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span>
<span class="w">        </span><span class="nx">Email</span><span class="p">:</span><span class="w">     </span><span class="nx">req</span><span class="p">.</span><span class="nx">Email</span><span class="p">,</span>
<span class="w">        </span><span class="nx">CreatedAt</span><span class="p">:</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Now</span><span class="p">(),</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">SaveUser</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;failed to save user: %w&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 4. 写入缓存</span>
<span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">SetUser</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>3. 运行测试，调整代码</strong></p>
<div class="highlight"><pre><span></span><code>go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-v<span class="w"> </span>./...
</code></pre></div>

<p>如果测试失败，把错误信息贴给 Cursor，让它修复。</p>
<h3 id="32-bdd">3.2 BDD 风格测试</h3>
<p>BDD 更注重业务场景描述。我用 Gherkin 语法写场景，然后让 Cursor 生成测试代码。</p>
<p><strong>场景描述（features/user_registration.feature）：</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">Feature:</span><span class="nf"> 用户注册</span>
<span class="nf">  作为一个新用户</span>
<span class="nf">  我想要注册一个账号</span>
<span class="nf">  以便使用系统功能</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> 成功注册</span>
<span class="k">    Given </span><span class="nf">用户不存在</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">用户提交注册信息 &quot;</span><span class="s">张三</span><span class="nf">&quot; 和 &quot;</span><span class="s">zhangsan@example.com</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">应该创建用户成功</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">用户应该收到欢迎邮件</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> 邮箱已被注册</span>
<span class="k">    Given </span><span class="nf">邮箱 &quot;</span><span class="s">zhangsan@example.com</span><span class="nf">&quot; 已被注册</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">用户尝试用该邮箱注册</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">应该返回 &quot;</span><span class="s">邮箱已被使用</span><span class="nf">&quot; 错误</span>
</code></pre></div>

<p>然后跟 Cursor 说：</p>
<div class="highlight"><pre><span></span><code>根据 features/user_registration.feature，用 Go 和 testify 实现 BDD 测试
</code></pre></div>

<p>Cursor 会生成类似这样的代码：</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">TestUserRegistration</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">t</span><span class="p">.</span><span class="nx">Run</span><span class="p">(</span><span class="s">&quot;成功注册&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given: 用户不存在</span>
<span class="w">        </span><span class="nx">service</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">setupTestService</span><span class="p">()</span>
<span class="w">        </span><span class="nx">email</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;zhangsan@example.com&quot;</span>

<span class="w">        </span><span class="c1">// When: 用户提交注册信息</span>
<span class="w">        </span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">service</span><span class="p">.</span><span class="nx">Register</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">RegisterRequest</span><span class="p">{</span>
<span class="w">            </span><span class="nx">Name</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;张三&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">Email</span><span class="p">:</span><span class="w"> </span><span class="nx">email</span><span class="p">,</span>
<span class="w">        </span><span class="p">})</span>

<span class="w">        </span><span class="c1">// Then: 应该创建用户成功</span>
<span class="w">        </span><span class="nx">assert</span><span class="p">.</span><span class="nx">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">        </span><span class="nx">assert</span><span class="p">.</span><span class="nx">NotNil</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">)</span>

<span class="w">        </span><span class="c1">// And: 用户应该收到欢迎邮件</span>
<span class="w">        </span><span class="nx">assert</span><span class="p">.</span><span class="nx">True</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">mockEmailService</span><span class="p">.</span><span class="nx">WasSent</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;欢迎&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">t</span><span class="p">.</span><span class="nx">Run</span><span class="p">(</span><span class="s">&quot;邮箱已被注册&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Given: 邮箱已被注册</span>
<span class="w">        </span><span class="nx">service</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">setupTestService</span><span class="p">()</span>
<span class="w">        </span><span class="nx">existingEmail</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;zhangsan@example.com&quot;</span>
<span class="w">        </span><span class="nx">service</span><span class="p">.</span><span class="nx">Register</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">RegisterRequest</span><span class="p">{</span>
<span class="w">            </span><span class="nx">Name</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;张三&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">Email</span><span class="p">:</span><span class="w"> </span><span class="nx">existingEmail</span><span class="p">,</span>
<span class="w">        </span><span class="p">})</span>

<span class="w">        </span><span class="c1">// When: 用户尝试用该邮箱注册</span>
<span class="w">        </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">service</span><span class="p">.</span><span class="nx">Register</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">RegisterRequest</span><span class="p">{</span>
<span class="w">            </span><span class="nx">Name</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;李四&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">Email</span><span class="p">:</span><span class="w"> </span><span class="nx">existingEmail</span><span class="p">,</span>
<span class="w">        </span><span class="p">})</span>

<span class="w">        </span><span class="c1">// Then: 应该返回错误</span>
<span class="w">        </span><span class="nx">assert</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">        </span><span class="nx">assert</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;邮箱已被使用&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="33-table-driven-tests">3.3 表驱动测试（Table-Driven Tests）</h3>
<p>Go 里常用的测试模式，Cursor 也很擅长：</p>
<div class="highlight"><pre><span></span><code>帮我写一个表驱动测试，覆盖 ValidateEmail 函数的各种场景
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">TestValidateEmail</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">tests</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">name</span><span class="w">    </span><span class="kt">string</span>
<span class="w">        </span><span class="nx">email</span><span class="w">   </span><span class="kt">string</span>
<span class="w">        </span><span class="nx">wantErr</span><span class="w"> </span><span class="kt">bool</span>
<span class="w">        </span><span class="nx">errMsg</span><span class="w">  </span><span class="kt">string</span>
<span class="w">    </span><span class="p">}{</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="p">:</span><span class="w">    </span><span class="s">&quot;有效邮箱&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">email</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;test@example.com&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">wantErr</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="p">:</span><span class="w">    </span><span class="s">&quot;缺少@符号&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">email</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;testexample.com&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">wantErr</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">errMsg</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;invalid email format&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="p">:</span><span class="w">    </span><span class="s">&quot;缺少域名&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">email</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;test@&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">wantErr</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">errMsg</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;invalid email format&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="p">:</span><span class="w">    </span><span class="s">&quot;空字符串&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">email</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">wantErr</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">errMsg</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;email is required&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nx">name</span><span class="p">:</span><span class="w">    </span><span class="s">&quot;包含非法字符&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">email</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;test@exam ple.com&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">wantErr</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">errMsg</span><span class="p">:</span><span class="w">  </span><span class="s">&quot;invalid email format&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">tt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">tests</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">t</span><span class="p">.</span><span class="nx">Run</span><span class="p">(</span><span class="nx">tt</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">t</span><span class="w"> </span><span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ValidateEmail</span><span class="p">(</span><span class="nx">tt</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">tt</span><span class="p">.</span><span class="nx">wantErr</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">assert</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">                </span><span class="nx">assert</span><span class="p">.</span><span class="nx">Contains</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">.</span><span class="nx">Error</span><span class="p">(),</span><span class="w"> </span><span class="nx">tt</span><span class="p">.</span><span class="nx">errMsg</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">assert</span><span class="p">.</span><span class="nx">NoError</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>这种测试覆盖面广，维护成本低，特别适合用 AI 生成。</p>
<h2 id="_1">四、小步快跑：增量式开发</h2>
<p>用 Cursor 写代码，最忌讳的就是一口气让它生成一大坨代码。那样既不可控，也不好调试。</p>
<h3 id="41">4.1 分解任务</h3>
<p>我会把一个大功能拆成小任务，每次只让 Cursor 做一件事。</p>
<p><strong>坏例子（一步到位）：</strong></p>
<div class="highlight"><pre><span></span><code>帮我实现一个完整的用户服务，包括注册、登录、修改资料、
删除账号、找回密码等功能，要支持 JWT 认证、Redis 缓存、
MySQL 持久化、Kafka 消息发送、分布式事务
</code></pre></div>

<p>这种需求太模糊了，Cursor 生成的代码质量肯定不高。</p>
<p><strong>好例子（小步迭代）：</strong></p>
<div class="highlight"><pre><span></span><code>第一步：帮我定义 User 结构体和 UserRepository 接口

第二步：实现 UserRepository 的 MySQL 版本，只需要 Create 和 GetByID 方法

第三步：给 UserRepository 加一层 Redis 缓存装饰器

第四步：实现 UserService，只包含注册功能

第五步：加上参数校验和错误处理

...
</code></pre></div>

<p>每一步都能独立测试，出问题也容易定位。</p>
<h3 id="42">4.2 频繁提交</h3>
<p>我现在写代码的节奏是：写一点 → 测试 → 提交 → 写一点 → 测试 → 提交。</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: add User struct and Repository interface&quot;</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: implement MySQL UserRepository&quot;</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: add Redis caching layer&quot;</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: implement user registration&quot;</span>
</code></pre></div>

<p>这样做的好处：
- <strong>回滚方便</strong>：改坏了可以立刻回退
- <strong>Review 友好</strong>：每个 commit 只改一点点，容易 review
- <strong>记录清晰</strong>：Git 历史就是你的开发日志</p>
<p><img alt="Git 提交历史，整齐的提交记录" src="https://images.unsplash.com/photo-1556075798-4825dfaaf498"></p>
<h3 id="43-review">4.3 及时 Review 代码</h3>
<p>AI 生成的代码不能照单全收，必须自己过一遍。我的 checklist：</p>
<ul>
<li>[ ] 逻辑是否正确？</li>
<li>[ ] 边界情况考虑了吗？</li>
<li>[ ] 错误处理完善吗？</li>
<li>[ ] 性能有问题吗？</li>
<li>[ ] 安全隐患排查了吗？</li>
<li>[ ] 命名规范吗？</li>
<li>[ ] 注释清楚吗？</li>
</ul>
<p>发现问题就立刻让 Cursor 改：</p>
<div class="highlight"><pre><span></span><code>这个函数没有处理 context 超时，加上超时处理
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// 修改前</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">UserRepository</span><span class="p">)</span><span class="w"> </span><span class="nx">GetByID</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="nx">User</span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">QueryRow</span><span class="p">(</span><span class="s">&quot;SELECT * FROM users WHERE id = ?&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">).</span><span class="nx">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span>
<span class="p">}</span>

<span class="c1">// 修改后</span>
<span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">UserRepository</span><span class="p">)</span><span class="w"> </span><span class="nx">GetByID</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="nx">User</span>

<span class="w">    </span><span class="c1">// 带超时的查询</span>
<span class="w">    </span><span class="nx">query</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;SELECT * FROM users WHERE id = ?&quot;</span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">QueryRowContext</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">query</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">).</span><span class="nx">Scan</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">user</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nx">Is</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">DeadlineExceeded</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;query timeout: %w&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="prompt-ai">五、写好 Prompt：跟 AI 沟通的艺术</h2>
<p>用 Cursor 写代码，本质上是在跟 AI 沟通。Prompt 写得好不好，直接决定了代码质量。</p>
<h3 id="51">5.1 清晰具体</h3>
<p><strong>坏 Prompt：</strong></p>
<div class="highlight"><pre><span></span><code>优化一下这个函数
</code></pre></div>

<p>AI 不知道你想优化什么：性能？可读性？还是内存占用？</p>
<p><strong>好 Prompt：</strong></p>
<div class="highlight"><pre><span></span><code>这个函数在处理大文件时内存占用过高，改成流式处理，
每次只读 4KB，避免一次性加载整个文件到内存
</code></pre></div>

<h3 id="52">5.2 提供上下文</h3>
<p><strong>坏 Prompt：</strong></p>
<div class="highlight"><pre><span></span><code>帮我写一个排序函数
</code></pre></div>

<p><strong>好 Prompt：</strong></p>
<div class="highlight"><pre><span></span><code>这是一个电商系统，需要对商品列表排序。
- 支持按价格、销量、评分、上架时间排序
- 支持升序和降序
- 数据量可能有几十万条，性能要求高
- 使用 Go 语言，返回类型是 []Product

请实现 SortProducts 函数
</code></pre></div>

<h3 id="53">5.3 举例说明</h3>
<p>有时候用例子比文字描述更清楚：</p>
<div class="highlight"><pre><span></span><code>我需要一个时间格式化函数，把 time.Time 转成指定格式的字符串。

例如：
输入: 2025-10-21 14:30:45
输出格式 &quot;YYYY-MM-DD HH:mm:ss&quot; → &quot;2025-10-21 14:30:45&quot;
输出格式 &quot;YYYY年MM月DD日&quot; → &quot;2025年10月21日&quot;
输出格式 &quot;MM/DD/YYYY&quot; → &quot;10/21/2025&quot;

请用 Go 实现，支持常见的格式占位符
</code></pre></div>

<h3 id="54">5.4 指定约束条件</h3>
<div class="highlight"><pre><span></span><code>实现一个 LRU 缓存，要求：
- 容量可配置
- 线程安全
- O(1) 的读写性能
- 不使用第三方库，只用标准库
- 要有完整的单元测试
</code></pre></div>

<h3 id="55">5.5 迭代优化</h3>
<p>第一次生成的代码不满意，别着急重写，而是逐步优化：</p>
<div class="highlight"><pre><span></span><code>第一轮：这个缓存的性能还不够，把锁粒度细化，用分段锁

第二轮：锁竞争还是明显，改成无锁实现，用 sync/atomic

第三轮：内存占用太大了，加上定期清理过期数据的机制
</code></pre></div>

<p><img alt="AI 对话" src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97"></p>
<h2 id="ai_1">六、提供充足的上下文：让 AI 看得更全</h2>
<p>Cursor 的智能程度，很大程度上取决于它能"看到"多少信息。</p>
<h3 id="61">6.1 @ 符号引用文件</h3>
<p>在 AI 对话框里，用 <code>@</code> 可以引用文件：</p>
<div class="highlight"><pre><span></span><code>@user_service.go 这个文件的错误处理不统一，
参考 @error_handler.go 的规范改一下
</code></pre></div>

<p>Cursor 会同时读取这两个文件，然后做统一的修改。</p>
<h3 id="62-codebase-indexing">6.2 Codebase Indexing（代码库索引）</h3>
<p>Cursor 会自动索引你的整个代码库。当你问问题时，它会自动检索相关代码。</p>
<div class="highlight"><pre><span></span><code>我：我们的日志系统是怎么实现的？

Cursor：根据代码库分析，你们使用的是 zap 日志库，
配置在 pkg/logger/logger.go 中，支持日志分级、
文件切割和 JSON 格式输出。需要我帮你看看哪个部分吗？
</code></pre></div>

<h3 id="63-cursorignore">6.3 使用 .cursorignore</h3>
<p>有些文件不需要让 AI 看到，比如 <code>node_modules</code>、<code>vendor</code>、<code>.git</code>。在 <code>.cursorignore</code> 里排除它们：</p>
<div class="highlight"><pre><span></span><code>node_modules/
vendor/
*.log
.git/
dist/
coverage/
</code></pre></div>

<p>这样可以提高索引速度，也避免 AI 被无关代码干扰。</p>
<h3 id="64">6.4 工作区设置</h3>
<p>在 <code>.vscode/settings.json</code>（Cursor 兼容）里配置一些项目特定的规则：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;cursor.ai.model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cursor.ai.maxTokens&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cursor.ai.temperature&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;editor.formatOnSave&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;editor.codeActionsOnSave&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;source.organizeImports&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="mcp-cursor">七、MCP 和工具：扩展 Cursor 的能力</h2>
<p>MCP (Model Context Protocol) 是 Anthropic（Claude 的开发公司）推出的协议，让 AI 能调用外部工具和数据源。</p>
<h3 id="71-mcp">7.1 常用 MCP 工具</h3>
<p><strong>文件系统工具</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;filesystem&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;allowedPaths&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/Users/yourname/workspace&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>AI 可以直接读写文件，批量重构时特别有用：</p>
<div class="highlight"><pre><span></span><code>把 src/ 目录下所有 .js 文件的 console.log 改成用我们的 logger
</code></pre></div>

<p>Cursor 会自动遍历所有文件，逐个修改。</p>
<p><strong>数据库工具</strong></p>
<p>配置数据库连接后，AI 可以帮你写 SQL、分析数据：</p>
<div class="highlight"><pre><span></span><code>连接到我的 PostgreSQL 数据库，分析 users 表的数据分布，
找出最活跃的用户群体
</code></pre></div>

<p><strong>API 工具</strong></p>
<p>AI 可以调用外部 API：</p>
<div class="highlight"><pre><span></span><code>调用 GitHub API，列出我最近创建的 5 个 issue
</code></pre></div>

<p><img alt="工具集成示意图，多个工具围绕 AI 核心" src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158"></p>
<h3 id="72">7.2 自定义工具</h3>
<p>你可以写自己的 MCP 工具。比如我写了个代码质量检查工具：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># mcp_code_quality.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server</span><span class="w"> </span><span class="kn">import</span> <span class="n">Server</span><span class="p">,</span> <span class="n">Tool</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="s2">&quot;code-quality-checker&quot;</span><span class="p">)</span>

<span class="nd">@server</span><span class="o">.</span><span class="n">tool</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_cyclomatic_complexity</span><span class="p">(</span><span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;检查代码复杂度&quot;&quot;&quot;</span>
    <span class="c1"># 用 radon 或其他工具分析代码</span>
    <span class="n">complexity</span> <span class="o">=</span> <span class="n">analyze_complexity</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">,</span>
        <span class="s2">&quot;complexity&quot;</span><span class="p">:</span> <span class="n">complexity</span><span class="p">,</span>
        <span class="s2">&quot;issues&quot;</span><span class="p">:</span> <span class="n">find_complex_functions</span><span class="p">(</span><span class="n">complexity</span><span class="p">)</span>
    <span class="p">}</span>

<span class="nd">@server</span><span class="o">.</span><span class="n">tool</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_test_coverage</span><span class="p">(</span><span class="n">package</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;检查测试覆盖率&quot;&quot;&quot;</span>
    <span class="n">coverage</span> <span class="o">=</span> <span class="n">run_coverage</span><span class="p">(</span><span class="n">package</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;package&quot;</span><span class="p">:</span> <span class="n">package</span><span class="p">,</span>
        <span class="s2">&quot;coverage_percent&quot;</span><span class="p">:</span> <span class="n">coverage</span><span class="o">.</span><span class="n">percent</span><span class="p">,</span>
        <span class="s2">&quot;uncovered_lines&quot;</span><span class="p">:</span> <span class="n">coverage</span><span class="o">.</span><span class="n">missing_lines</span>
    <span class="p">}</span>

<span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>

<p>然后在 Cursor 里配置这个工具：</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mcp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;servers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;code-quality&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;mcp_code_quality.py&quot;</span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>之后就可以让 AI 调用你的工具了：</p>
<div class="highlight"><pre><span></span><code>检查 user_service.go 的圈复杂度，如果超过 10 就重构
</code></pre></div>

<h3 id="73">7.3 与其他工具集成</h3>
<p><strong>Source Tree / Beyond Compare</strong></p>
<p>这两个是我多年的老伙伴，现在依然在用：</p>
<ul>
<li><strong>Source Tree</strong>：Git 可视化管理工具，清晰展示代码变更历史和分支结构</li>
<li><strong>Beyond Compare</strong>：代码对比和合并，处理复杂的 merge conflict 很好用</li>
</ul>
<p>虽然 Cursor 集成了 AI 能力，但人工审阅 AI 生成的代码仍然不可或缺。特别是关键业务逻辑、安全相关代码、性能敏感模块，必须仔细审查。我通常的工作流是：</p>
<ol>
<li>在 Cursor 里让 AI 写代码和重构</li>
<li>用 Source Tree 查看所有改动，逐个 diff 审阅</li>
<li>用 Beyond Compare 深度对比关键文件，确保改动符合预期</li>
<li>人工测试验证，确认无误后再提交</li>
</ol>
<p><strong>AI 可以提高效率，但不能替代人的判断</strong>。每一行关键代码都值得你花时间去理解和验证</p>
<p><img alt="多工具协作" src="https://images.unsplash.com/photo-1551434678-e076c223a692"></p>
<h2 id="cursor_2">八、实战案例：用 Cursor 完成一个真实项目</h2>
<p>说了这么多理论，来个实战案例。我最近用 Cursor 重构了一个 Redis 客户端库，从零到发布只用了 3 天。</p>
<h3 id="81">8.1 项目启动</h3>
<p><strong>第一步：写设计文档</strong></p>
<div class="highlight"><pre><span></span><code><span class="gh"># Redis Client 设计文档</span>

<span class="gu">## 目标</span>
<span class="k">-</span><span class="w"> </span>支持 Redis Cluster 和 Sentinel
<span class="k">-</span><span class="w"> </span>自动故障转移
<span class="k">-</span><span class="w"> </span>连接池管理
<span class="k">-</span><span class="w"> </span>Pipeline 和 Transaction 支持
<span class="k">-</span><span class="w"> </span>完善的错误处理和重试机制

<span class="gu">## 架构</span>
<span class="k">-</span><span class="w"> </span>Client: 对外接口层
<span class="k">-</span><span class="w"> </span>Connector: 连接管理层
<span class="k">-</span><span class="w"> </span>Command: 命令封装层
<span class="k">-</span><span class="w"> </span>Serializer: 序列化层
</code></pre></div>

<p><strong>第二步：让 Cursor 生成项目骨架</strong></p>
<div class="highlight"><pre><span></span><code>根据 docs/design.md，用 Go 创建项目结构，
包括目录、主要接口定义、go.mod 文件
</code></pre></div>

<p>Cursor 生成了：</p>
<div class="highlight"><pre><span></span><code>redis-client/
├── go.mod
├── cmd/
│   └── example/
│       └── main.go
├── pkg/
│   ├── client/
│   │   ├── client.go
│   │   └── client_test.go
│   ├── connector/
│   │   ├── pool.go
│   │   └── pool_test.go
│   ├── command/
│   │   ├── command.go
│   │   └── string_commands.go
│   └── serializer/
│       └── serializer.go
├── docs/
│   └── design.md
└── README.md
</code></pre></div>

<h3 id="82">8.2 迭代开发</h3>
<p><strong>第三步：实现核心接口</strong></p>
<div class="highlight"><pre><span></span><code>实现 pkg/client/client.go 的 Client 接口，
包括 Get、Set、Del 三个基础命令
</code></pre></div>

<p><strong>第四步：写测试</strong></p>
<div class="highlight"><pre><span></span><code>为刚才实现的方法写单元测试和集成测试
</code></pre></div>

<p><strong>第五步：加功能</strong></p>
<div class="highlight"><pre><span></span><code>加上 Pipeline 支持，允许批量执行命令
</code></pre></div>

<p>每一步都是独立的，测试通过了再继续下一步。</p>
<h3 id="83">8.3 代码审查</h3>
<p>开发完后，我让 Cursor 帮我做代码审查：</p>
<div class="highlight"><pre><span></span><code>作为一个资深 Go 开发者，审查 pkg/client/ 下的所有代码，
从性能、安全、可维护性角度提出改进建议
</code></pre></div>

<p>Cursor 给出了一堆建议：</p>
<ul>
<li>连接池的锁粒度可以优化</li>
<li>错误处理可以更细化</li>
<li>某些地方可以用 sync.Pool 减少内存分配</li>
<li>单元测试覆盖率还不够</li>
</ul>
<p>然后我逐条优化。</p>
<h3 id="84">8.4 文档生成</h3>
<p>最后让 Cursor 帮我写文档：</p>
<div class="highlight"><pre><span></span><code>根据代码生成 README.md，包括：
- 快速开始
- API 文档
- 使用示例
- 最佳实践
- FAQ
</code></pre></div>

<p>几分钟后，一份完整的文档就好了。</p>
<p><img alt="" src="https://images.unsplash.com/photo-1519389950473-47ba0277781c"></p>
<h2 id="_2">九、一些经验和坑</h2>
<h3 id="91">9.1 不要过度依赖</h3>
<p>AI 是辅助工具，不是替代品。核心逻辑、架构设计、技术选型，这些还是要自己把关。</p>
<p>有一次我让 Cursor 优化一个算法，它给出的方案表面看起来很"高级"，实际上在我的场景下性能还不如原版。后来我自己分析了数据特征，手写了一个针对性的算法，性能提升了 10 倍。</p>
<h3 id="92">9.2 注意安全</h3>
<p>别让 AI 看到敏感信息。密码、密钥、Token 这些，要么用环境变量，要么放在 <code>.cursorignore</code> 里。</p>
<div class="highlight"><pre><span></span><code># .env 文件
DATABASE_URL=postgres://user:password@localhost/db
REDIS_URL=redis://:password@localhost:6379

# .cursorignore
.env
secrets/
*.key
*.pem
</code></pre></div>

<h3 id="93">9.3 版本控制很重要</h3>
<p>AI 有时会"画蛇添足"，改坏代码。所以频繁提交 Git 很重要，改坏了立刻回滚。</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;refactor: optimize connection pool&quot;</span>
<span class="c1"># 发现改坏了</span>
git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>HEAD^
</code></pre></div>

<h3 id="94">9.4 团队协作要对齐</h3>
<p>如果团队都在用 Cursor，最好统一配置和规范。在项目根目录放：</p>
<ul>
<li><code>.cursorrules</code>：编码规范</li>
<li><code>docs/coding-standards.md</code>：详细的开发指南</li>
<li><code>docs/architecture.md</code>：系统架构文档</li>
</ul>
<p>这样大家生成的代码风格才一致。</p>
<p><img alt="团队协作，多个人在看同一块屏幕讨论" src="https://images.unsplash.com/photo-1522071820081-009f0129c71c"></p>
<h2 id="_3">十、进阶技巧</h2>
<h3 id="101-snippets">10.1 自定义 Snippets</h3>
<p>把常用的代码片段做成模板：</p>
<div class="highlight"><pre><span></span><code><span class="c1">// .vscode/go.json</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Go HTTP Handler&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;httphandler&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;body&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;func ${1:Handler}(w http.ResponseWriter, r *http.Request) {&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\tif r.Method != http.Method${2:Get} {&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t\thttp.Error(w, \&quot;Method not allowed\&quot;, http.StatusMethodNotAllowed)&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t\treturn&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t}&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t// TODO: implement handler logic&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\tw.Header().Set(\&quot;Content-Type\&quot;, \&quot;application/json\&quot;)&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\tjson.NewEncoder(w).Encode(map[string]interface{}{&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t\t\&quot;status\&quot;: \&quot;ok\&quot;,&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;\t})&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;}&quot;</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>输入 <code>httphandler</code>，按 Tab，整个 HTTP 处理函数就出来了。</p>
<h3 id="102-ai">10.2 使用 AI 做代码重构</h3>
<p>大规模重构时，Cursor 特别好用：</p>
<div class="highlight"><pre><span></span><code>把整个项目的错误处理从 panic 改成返回 error，
遵循 Go 的错误处理最佳实践
</code></pre></div>

<p>AI 会扫描所有文件，逐个修改。你只需要最后审查一遍。</p>
<h3 id="103">10.3 生成样板代码</h3>
<p>Web 开发中有大量重复的样板代码，让 AI 生成能节省很多时间：</p>
<div class="highlight"><pre><span></span><code>为 User 模型生成完整的 CRUD API，包括：
- HTTP handlers
- Service layer
- Repository layer  
- 参数校验
- 错误处理
- 单元测试
</code></pre></div>

<p>几分钟就能生成几千行代码，虽然还需要调整，但比从零开始快多了。</p>
<h3 id="104">10.4 学习新技术</h3>
<p>遇到新技术，可以让 Cursor 当老师：</p>
<div class="highlight"><pre><span></span><code>我不熟悉 gRPC，帮我创建一个简单的 gRPC 服务示例，
包括 .proto 文件定义、服务端实现、客户端调用，
并加上详细注释解释每个部分的作用
</code></pre></div>

<p>边看代码边学，效率很高。</p>
<p><img alt="学习场景，笔记本电脑屏幕上显示代码和文档" src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3"></p>
<h2 id="_4">十一、结语</h2>
<p>用了 Cursor 半年多，我的编程效率至少提升了 20% 甚至更多。但更重要的是，它改变了我的工作方式：</p>
<ul>
<li><strong>从手写代码到设计代码</strong>：我现在花更多时间在架构设计和方案评审上，具体实现交给 AI</li>
<li><strong>从搜索答案到直接提问</strong>：以前遇到问题要去 Google、Stack Overflow 翻半天，现在直接问 Cursor</li>
<li><strong>从单打独斗到结对编程</strong>：AI 就像个永不疲倦的搭档，随时可以讨论</li>
</ul>
<p>但是，工具终究是工具。真正重要的是：</p>
<ul>
<li><strong>扎实的基础知识</strong>：不懂原理，AI 生成的代码你也看不懂</li>
<li><strong>良好的设计能力</strong>：AI 能实现你的想法，但想法本身要靠你</li>
<li><strong>持续的学习热情</strong>：技术日新月异，工具也在快速进化</li>
</ul>
<p>Cursor 不是银弹，但它确实是一把利器。用好它，能让你在编程这条路上走得更快、更远。</p>
<p>最后送大家一句话：<strong>工具会变，思维不变</strong>。无论用什么编辑器、什么 AI，写好代码的核心原则——清晰的逻辑、优雅的设计、健壮的测试——这些永远不会过时。</p>
<p>现在就打开 Cursor，开始你的高效编程之旅吧！三个月后，你会感谢现在的自己。</p>
<p><img alt="" src="https://images.unsplash.com/photo-1498050108023-c5249f4df085"></p>
<hr/>
<p>本作品采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/journal.html">journal</a>
      <a href="./tag/blog.html">blog</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="./bu-yao-rang-kuai-can-yu-duan-shi-pin-gai-bian-liao-wo-men.html" title="不要让快餐与短视频改变了我们">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="./tocttou-shi-jian-chai-zhong-de-lou-dong.html" title="TOCTTOU - 时间差中的漏洞">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./shi-yong-di-yi-xing-yuan-li-zuo-jia-gou-she-ji.html">使用第一性原理做架构设计</a></li>
      <li><a href="./zhi-chang-zhong-na-xie-huo-de-zui-jiu-de-fang-fa-lun-suo-xie.html">职场中那些“活得最久”的方法论缩写</a></li>
      <li><a href="./zui-tong-yong-de-6-da-yan-jiang-kuang-jia.html">最通用的 6 大演讲框架</a></li>
      <li><a href="./bie-liao-2025.html">别了, 2025</a></li>
      <li><a href="./ai-agent-she-ji-yu-luo-di.html">AI Agent 设计与落地</a></li>
    </ul>
  </div>



<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>
</body>
</html>