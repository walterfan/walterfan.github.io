
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="我的血泪教训：SSD突然死机，半年心血化为乌有。从痛苦中总结出的完美备份方案，让你永远不再经历数据丢失的噩梦。" />
<meta name="keywords" content="journal, blog, backup, disaster-recovery, linux, devops">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="数据丢失的灾难现场"/>
  <meta property="og:description" content="我的血泪教训：SSD突然死机，半年心血化为乌有。从痛苦中总结出的完美备份方案，让你永远不再经历数据丢失的噩梦。"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./shu-ju-diu-shi-de-zai-nan-xian-chang.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2025-09-20 20:20:00+08:00"/>
  <meta property="article:modified_time" content="2025-09-20 22:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Journal"/>
  <meta property="article:tag" content="journal"/>
  <meta property="article:tag" content="blog"/>
  <meta property="article:tag" content="backup"/>
  <meta property="article:tag" content="disaster-recovery"/>
  <meta property="article:tag" content="linux"/>
  <meta property="article:tag" content="devops"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; 数据丢失的灾难现场</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="shu-ju-diu-shi-de-zai-nan-xian-chang">数据丢失的灾难现场</h1>
    <p>
      Posted on Sat 20 September 2025 in <a href="./category/journal.html">Journal</a>

    </p>
  </header>


  <div>
    <table>
<thead>
<tr>
<th><strong>Abstract</strong></th>
<th>数据丢失的灾难现场：从SSD崩溃到完美备份方案的救赎之路</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authors</strong></td>
<td><a href="https://www.fanyamin.com">Walter Fan</a></td>
</tr>
<tr>
<td><strong>Category</strong></td>
<td>learning note</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>v1.0</td>
</tr>
<tr>
<td><strong>Updated</strong></td>
<td>2025-09-20</td>
</tr>
<tr>
<td><strong>License</strong></td>
<td><a href="http://creativecommons.org/licenses/by-nc-nd/4.0">CC-BY-NC-ND 4.0</a></td>
</tr>
</tbody>
</table>
<h2 id="_1">目录</h2>
<ul>
<li><a href="#程序员的灾难现场从ssd崩溃到完美备份方案的救赎之路">程序员的灾难现场：从SSD崩溃到完美备份方案的救赎之路</a></li>
<li><a href="#1-灾难现场当ssd说我不干了">1. 灾难现场：当SSD说"我不干了"</a></li>
<li><a href="#2-痛定思痛那些年我们忽视的备份">2. 痛定思痛：那些年我们忽视的备份</a><ul>
<li><a href="#21-想起来才备份综合症">2.1 "想起来才备份"综合症</a></li>
<li><a href="#22-单点故障陷阱">2.2 "单点故障"陷阱</a></li>
<li><a href="#23-这不可能发生在我身上心理">2.3 "这不可能发生在我身上"心理</a></li>
</ul>
</li>
<li><a href="#3-3-2-1备份法则不把鸡蛋放在一个篮子里">3. 3-2-1备份法则：不把鸡蛋放在一个篮子里</a></li>
<li><a href="#4-完美备份方案设计">4. 完美备份方案设计</a><ul>
<li><a href="#41-架构设计多层防护">4.1 架构设计：多层防护</a></li>
<li><a href="#42-本地备份第一道防线">4.2 本地备份：第一道防线</a></li>
<li><a href="#43-远程备份异地容灾">4.3 远程备份：异地容灾</a></li>
<li><a href="#44-云端备份终极保险">4.4 云端备份：终极保险</a></li>
</ul>
</li>
<li><a href="#5-自动化实现让机器替你记住">5. 自动化实现：让机器替你记住</a><ul>
<li><a href="#51-数据库备份脚本">5.1 数据库备份脚本</a></li>
<li><a href="#52-文件同步脚本">5.2 文件同步脚本</a></li>
<li><a href="#53-定时任务配置">5.3 定时任务配置</a></li>
<li><a href="#54-监控和告警">5.4 监控和告警</a></li>
<li><a href="#55-网盘上传脚本">5.5 网盘上传脚本</a></li>
</ul>
</li>
<li><a href="#6-灾难恢复当末日真的来临">6. 灾难恢复：当末日真的来临</a><ul>
<li><a href="#61-恢复优先级">6.1 恢复优先级</a></li>
<li><a href="#62-恢复脚本">6.2 恢复脚本</a></li>
</ul>
</li>
<li><a href="#7-总结备份是程序员的必修课">7. 总结：备份是程序员的必修课</a><ul>
<li><a href="#71-我的新备份哲学">7.1 我的新备份哲学</a></li>
<li><a href="#72-投入产出比">7.2 投入产出比</a></li>
<li><a href="#73-最后的忠告">7.3 最后的忠告</a></li>
</ul>
</li>
</ul>
<h1 id="ssd">程序员的灾难现场：从SSD崩溃到完美备份方案的救赎之路</h1>
<h2 id="1-ssd">1. 灾难现场：当SSD说"我不干了"</h2>
<p>周六的下午，阳光正好，我正在家里愉快地鼓捣自己的那台Linux主机。这台机器就像我的数字宠物，上面运行着我精心部署的各种服务：</p>
<ul>
<li><strong>Wiki</strong>：我的知识库，用来积累的技术笔记</li>
<li><strong>PlantUML</strong>：画图神器，各种架构图的摇篮  </li>
<li><strong>Jupyter Lab</strong>：数据分析的战场</li>
<li><strong>MySQL</strong>：存储着各种实验数据</li>
<li><strong>Redis</strong>：缓存小能手</li>
<li><strong>自研服务</strong>：我引以为傲的小项目们</li>
</ul>
<p>一切都很美好，直到...</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>ls<span class="w"> </span>/home/walter/wiki
ls:<span class="w"> </span>cannot<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;/home/walter/wiki&#39;</span>:<span class="w"> </span>Input/output<span class="w"> </span>error
</code></pre></div>

<p>我的心跳瞬间停了一拍。这个错误信息就像医生说"我们需要谈谈"一样可怕。</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>dmesg<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail
<span class="o">[</span><span class="m">12345</span>.678<span class="o">]</span><span class="w"> </span>ata1.00:<span class="w"> </span>exception<span class="w"> </span>Emask<span class="w"> </span>0x0<span class="w"> </span>SAct<span class="w"> </span>0x0<span class="w"> </span>SErr<span class="w"> </span>0x0<span class="w"> </span>action<span class="w"> </span>0x6<span class="w"> </span>frozen
<span class="o">[</span><span class="m">12346</span>.789<span class="o">]</span><span class="w"> </span>ata1.00:<span class="w"> </span>failed<span class="w"> </span>command:<span class="w"> </span>READ<span class="w"> </span>DMA<span class="w"> </span>EXT
<span class="o">[</span><span class="m">12347</span>.890<span class="o">]</span><span class="w"> </span>ata1.00:<span class="w"> </span>cmd<span class="w"> </span><span class="m">25</span>/00:08:00:00:00/00:00:00:00:00/e0<span class="w"> </span>tag<span class="w"> </span><span class="m">0</span><span class="w"> </span>dma<span class="w"> </span><span class="m">4096</span><span class="w"> </span><span class="k">in</span>
<span class="o">[</span><span class="m">12348</span>.901<span class="o">]</span><span class="w"> </span>ata1.00:<span class="w"> </span>status:<span class="w"> </span><span class="o">{</span><span class="w"> </span>DRDY<span class="w"> </span>ERR<span class="w"> </span><span class="o">}</span>
<span class="o">[</span><span class="m">12349</span>.012<span class="o">]</span><span class="w"> </span>ata1.00:<span class="w"> </span>error:<span class="w"> </span><span class="o">{</span><span class="w"> </span>UNC<span class="w"> </span><span class="o">}</span>
</code></pre></div>

<p><strong>SSD崩了！</strong></p>
<p>就这样，我的数字宠物突然心脏病发作，半年的Wiki数据瞬间化为乌有。那一刻，我终于理解了什么叫"欲哭无泪"。</p>
<h2 id="2">2. 痛定思痛：那些年我们忽视的备份</h2>
<p>坐在电脑前，看着黑屏，我开始反思自己的备份策略。说起来都是泪：</p>
<h3 id="21">2.1 "想起来才备份"综合症</h3>
<p>我的备份方案简单粗暴：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 想起来的时候才执行</span>
$<span class="w"> </span>tar<span class="w"> </span>-czf<span class="w"> </span>backup_<span class="k">$(</span>date<span class="w"> </span>+%Y%m%d<span class="k">)</span>.tar.gz<span class="w"> </span>/home/walter/wiki
$<span class="w"> </span>scp<span class="w"> </span>backup_*.tar.gz<span class="w"> </span>walter@gitlab.internal.com:/backups/
</code></pre></div>

<p>问题是，人的记性比鱼还差。上次备份是什么时候？两个月前？三个月前？鬼知道！</p>
<h3 id="22">2.2 "单点故障"陷阱</h3>
<p>我把所有数据都备份到私有GitLab上，自以为很安全。但问题是：</p>
<ul>
<li>GitLab本身就是单点故障</li>
<li>没有异地备份</li>
<li>没有多版本保留策略</li>
<li>没有自动化验证</li>
</ul>
<p>这就像把所有鸡蛋放在一个篮子里，然后把篮子放在悬崖边上。</p>
<h3 id="23">2.3 "这不可能发生在我身上"心理</h3>
<p>作为程序员，我们都有一种迷之自信：</p>
<ul>
<li>"SSD很可靠的，不会坏"</li>
<li>"RAID1就够了"  </li>
<li>"我的代码都在Git上，不用担心"</li>
<li>"重要数据我记得备份了"</li>
</ul>
<p>直到灾难降临，才发现自己有多天真。</p>
<h2 id="3-3-2-1">3. 3-2-1备份法则：不把鸡蛋放在一个篮子里</h2>
<p>痛苦之后，我开始学习专业的备份策略。业界有个著名的<strong>3-2-1法则</strong>：</p>
<ul>
<li><strong>3份拷贝</strong>：原始数据 + 2份备份</li>
<li><strong>2种媒介</strong>：不同类型的存储设备</li>
<li><strong>1份异地</strong>：至少一份备份在异地</li>
</ul>
<p>这个法则看起来简单，但背后的逻辑很深刻：</p>
<div class="highlight"><pre><span></span><code>原始数据 ──┐
           ├─── 本地备份 (NAS/外置硬盘)
           ├─── 远程备份 (私有云/VPS)  
           └─── 云端备份 (夸克网盘/阿里云盘)
</code></pre></div>

<h2 id="4">4. 完美备份方案设计</h2>
<h3 id="41">4.1 架构设计：多层防护</h3>
<p>基于血的教训，我设计了一个<strong>多层防护</strong>的备份架构：</p>
<div class="highlight"><pre><span></span><code>┌─────────────────────────────────────────────────────────┐
│                   生产环境 (Linux主机)                    │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐       │
│  │  Wiki   │ │  MySQL  │ │  Redis  │ │ 自研服务 │       │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘       │
└─────────────────┬───────────────────────────────────────┘
                  │ 自动备份 (每小时/每天)
                  ▼
┌─────────────────────────────────────────────────────────┐
│                    第一层：本地备份                      │
│  ┌─────────────┐           ┌─────────────┐              │
│  │    NAS      │           │  外置硬盘    │              │
│  │  (主备份)    │           │  (冷备份)    │              │
│  └─────────────┘           └─────────────┘              │
└─────────────────┬───────────────────────────────────────┘
                  │ 异地同步 (每天)
                  ▼
┌─────────────────────────────────────────────────────────┐
│                   第二层：远程备份                       │
│  ┌─────────────┐           ┌─────────────┐              │
│  │   Gitea     │           │    VPS      │              │
│  │  (代码仓库)  │           │  (文件备份)  │              │
│  └─────────────┘           └─────────────┘              │
└─────────────────┬───────────────────────────────────────┘
                  │ 云端同步 (每周)
                  ▼
┌─────────────────────────────────────────────────────────┐
│                   第三层：云端备份                       │
│  ┌─────────────┐           ┌─────────────┐              │
│  │  夸克网盘    │           │  阿里云盘    │              │
│  │  (归档存储)  │           │  (冷备份)    │              │
│  └─────────────┘           └─────────────┘              │
└─────────────────────────────────────────────────────────┘
</code></pre></div>

<h3 id="42">4.2 本地备份：第一道防线</h3>
<p><strong>NAS作为主力</strong>：
- 自动挂载到生产环境
- 实时或准实时同步
- 支持快照和版本管理</p>
<p><strong>外置硬盘作为冷备</strong>：
- 每月手动更新
- 物理隔离，防止网络攻击
- 存放在不同地点</p>
<h3 id="43">4.3 远程备份：异地容灾</h3>
<p><strong>Gitea替代GitLab</strong>：
- 更轻量，资源消耗少
- 支持Git LFS，适合大文件
- 自建，完全控制</p>
<p><strong>VPS文件备份</strong>：
- 定期rsync同步
- 多地域部署
- 加密传输和存储</p>
<h3 id="44">4.4 云端备份：终极保险</h3>
<p><strong>网盘存储</strong>：
- 夸克网盘 / 阿里云盘 / 腾讯微云
- 成本极低，个人版基本免费（10TB起步）
- 大容量存储，适合长期归档
- 支持命令行工具，可以自动化上传</p>
<p><strong>网盘选择建议</strong>：
- <strong>夸克网盘</strong>：UC出品，速度快，容量大（免费10TB），支持WebDAV
- <strong>阿里云盘</strong>：速度快，容量大，官方支持命令行
- <strong>腾讯微云</strong>：与微信生态集成好
- <strong>建议多个网盘冗余</strong>：鸡蛋不要放在一个篮子里</p>
<h2 id="5">5. 自动化实现：让机器替你记住</h2>
<p>人会忘记，但机器不会。所有备份都必须自动化！</p>
<h3 id="51">5.1 数据库备份脚本</h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># mysql_backup.sh - MySQL自动备份脚本</span>

<span class="nv">BACKUP_DIR</span><span class="o">=</span><span class="s2">&quot;/backup/mysql&quot;</span>
<span class="nv">DATE</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d_%H%M%S<span class="k">)</span>
<span class="nv">RETENTION_DAYS</span><span class="o">=</span><span class="m">30</span>

<span class="c1"># 创建备份目录</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$BACKUP_DIR</span>

<span class="c1"># 备份所有数据库</span>
mysqldump<span class="w"> </span>--all-databases<span class="w"> </span>--single-transaction<span class="w"> </span>--routines<span class="w"> </span>--triggers<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--user<span class="o">=</span>backup_user<span class="w"> </span>--password<span class="o">=</span>backup_pass<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="p">|</span><span class="w"> </span>gzip<span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$BACKUP_DIR</span>/mysql_backup_<span class="nv">$DATE</span>.sql.gz

<span class="c1"># 验证备份文件</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;MySQL备份成功: mysql_backup_</span><span class="nv">$DATE</span><span class="s2">.sql.gz&quot;</span>

<span class="w">    </span><span class="c1"># 同步到NAS</span>
<span class="w">    </span>rsync<span class="w"> </span>-av<span class="w"> </span><span class="nv">$BACKUP_DIR</span>/<span class="w"> </span>/mnt/nas/mysql_backups/

<span class="w">    </span><span class="c1"># 上传到远程VPS</span>
<span class="w">    </span>scp<span class="w"> </span><span class="nv">$BACKUP_DIR</span>/mysql_backup_<span class="nv">$DATE</span>.sql.gz<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>walter@backup-vps.com:/backups/mysql/

<span class="w">    </span><span class="c1"># 清理过期备份</span>
<span class="w">    </span>find<span class="w"> </span><span class="nv">$BACKUP_DIR</span><span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;mysql_backup_*.sql.gz&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-mtime<span class="w"> </span>+<span class="nv">$RETENTION_DAYS</span><span class="w"> </span>-delete
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;MySQL备份失败!&quot;</span>
<span class="w">    </span><span class="c1"># 发送告警邮件</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;MySQL备份失败，请检查!&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;备份告警&quot;</span><span class="w"> </span>admin@example.com
<span class="k">fi</span>
</code></pre></div>

<h3 id="52">5.2 文件同步脚本</h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># file_sync.sh - 文件同步脚本</span>

<span class="nv">SOURCE_DIRS</span><span class="o">=(</span>
<span class="w">    </span><span class="s2">&quot;/home/walter/wiki&quot;</span>
<span class="w">    </span><span class="s2">&quot;/home/walter/projects&quot;</span><span class="w"> </span>
<span class="w">    </span><span class="s2">&quot;/etc/nginx&quot;</span>
<span class="w">    </span><span class="s2">&quot;/var/log/applications&quot;</span>
<span class="o">)</span>

<span class="nv">BACKUP_ROOT</span><span class="o">=</span><span class="s2">&quot;/backup/files&quot;</span>
<span class="nv">NAS_ROOT</span><span class="o">=</span><span class="s2">&quot;/mnt/nas/file_backups&quot;</span>
<span class="nv">DATE</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d_%H%M%S<span class="k">)</span>

<span class="k">for</span><span class="w"> </span>dir<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SOURCE_DIRS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$dir</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nv">dir_name</span><span class="o">=</span><span class="k">$(</span>basename<span class="w"> </span><span class="nv">$dir</span><span class="k">)</span>
<span class="w">        </span><span class="nv">backup_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$BACKUP_ROOT</span><span class="s2">/</span><span class="nv">$dir_name</span><span class="s2">&quot;</span>

<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;📁 备份目录: </span><span class="nv">$dir</span><span class="s2"> -&gt; </span><span class="nv">$backup_path</span><span class="s2">&quot;</span>

<span class="w">        </span><span class="c1"># 使用rsync增量备份</span>
<span class="w">        </span>rsync<span class="w"> </span>-av<span class="w"> </span>--delete<span class="w"> </span>--backup<span class="w"> </span>--backup-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$backup_path</span><span class="s2">/.deleted_</span><span class="nv">$DATE</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">            </span><span class="s2">&quot;</span><span class="nv">$dir</span><span class="s2">/&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$backup_path</span><span class="s2">/&quot;</span>

<span class="w">        </span><span class="c1"># 同步到NAS</span>
<span class="w">        </span>rsync<span class="w"> </span>-av<span class="w"> </span>--delete<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$backup_path</span><span class="s2">/&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NAS_ROOT</span><span class="s2">/</span><span class="nv">$dir_name</span><span class="s2">/&quot;</span>

<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$dir_name</span><span class="s2"> 备份完成&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;⚠️  目录不存在: </span><span class="nv">$dir</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="k">done</span>

<span class="c1"># 创建备份清单</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;# 备份清单 - </span><span class="nv">$DATE</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$BACKUP_ROOT</span>/manifest_<span class="nv">$DATE</span>.txt
du<span class="w"> </span>-sh<span class="w"> </span><span class="nv">$BACKUP_ROOT</span>/*<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$BACKUP_ROOT</span>/manifest_<span class="nv">$DATE</span>.txt
</code></pre></div>

<h3 id="53">5.3 定时任务配置</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># crontab -e</span>
<span class="c1"># 添加以下定时任务</span>

<span class="c1"># 每小时备份数据库</span>
<span class="m">0</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/home/walter/scripts/mysql_backup.sh<span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/backup.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># 每天凌晨2点备份文件</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/home/walter/scripts/file_sync.sh<span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/backup.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># 每周日上传到网盘</span>
<span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">0</span><span class="w"> </span>/home/walter/scripts/cloud_upload.sh<span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/backup.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>

<span class="c1"># 每天检查备份状态</span>
<span class="m">0</span><span class="w"> </span><span class="m">8</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/home/walter/scripts/backup_health_check.sh<span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/backup.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</code></pre></div>

<h3 id="54">5.4 监控和告警</h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># backup_health_check.sh - 备份健康检查</span>

<span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&quot;/var/log/backup_health.log&quot;</span>
<span class="nv">ALERT_EMAIL</span><span class="o">=</span><span class="s2">&quot;admin@example.com&quot;</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🔍 开始备份健康检查 - </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>

<span class="c1"># 检查本地备份</span>
check_local_backup<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">backup_dir</span><span class="o">=</span><span class="s2">&quot;/backup&quot;</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="nv">max_age_hours</span><span class="o">=</span><span class="m">25</span><span class="w">  </span><span class="c1"># 25小时内必须有备份</span>

<span class="w">    </span><span class="nv">latest_backup</span><span class="o">=</span><span class="k">$(</span>find<span class="w"> </span><span class="nv">$backup_dir</span><span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.gz&quot;</span><span class="w"> </span>-mtime<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$latest_backup</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;本地备份异常：24小时内无新备份&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;本地备份异常：24小时内无新备份&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;备份告警&quot;</span><span class="w"> </span><span class="nv">$ALERT_EMAIL</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;本地备份正常：找到 </span><span class="nv">$latest_backup</span><span class="s2"> 个最新备份&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1"># 检查NAS连接</span>
check_nas_connection<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>mountpoint<span class="w"> </span>-q<span class="w"> </span>/mnt/nas<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;NAS连接正常&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;NAS连接异常&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;NAS连接异常，请检查网络和挂载点&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;备份告警&quot;</span><span class="w"> </span><span class="nv">$ALERT_EMAIL</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1"># 检查远程VPS连接</span>
check_remote_connection<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>ssh<span class="w"> </span>-o<span class="w"> </span><span class="nv">ConnectTimeout</span><span class="o">=</span><span class="m">10</span><span class="w"> </span>walter@backup-vps.com<span class="w"> </span><span class="s2">&quot;echo &#39;connection test&#39;&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;远程VPS连接正常&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;远程VPS连接异常&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;远程VPS连接异常，请检查网络和SSH密钥&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;备份告警&quot;</span><span class="w"> </span><span class="nv">$ALERT_EMAIL</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1"># 执行检查</span>
check_local_backup
check_nas_connection<span class="w">  </span>
check_remote_connection

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;备份健康检查完成 - </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$LOG_FILE</span>
</code></pre></div>

<h3 id="55">5.5 网盘上传脚本</h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># cloud_upload.sh - 网盘上传脚本</span>

<span class="nv">BACKUP_ROOT</span><span class="o">=</span><span class="s2">&quot;/backup&quot;</span>
<span class="nv">CLOUD_DIR</span><span class="o">=</span><span class="s2">&quot;/home/walter/cloud_sync&quot;</span>
<span class="nv">DATE</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d<span class="k">)</span>

<span class="c1"># 创建云端同步目录</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="nv">$CLOUD_DIR</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;🌐 开始网盘上传 - </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>

<span class="c1"># 压缩本周的备份文件</span>
<span class="nv">weekly_archive</span><span class="o">=</span><span class="s2">&quot;backup_weekly_</span><span class="nv">$DATE</span><span class="s2">.tar.gz&quot;</span>
tar<span class="w"> </span>-czf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CLOUD_DIR</span><span class="s2">/</span><span class="nv">$weekly_archive</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--exclude<span class="o">=</span><span class="s2">&quot;*.tmp&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--exclude<span class="o">=</span><span class="s2">&quot;*.log&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-C<span class="w"> </span><span class="nv">$BACKUP_ROOT</span><span class="w"> </span>.

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;压缩完成: </span><span class="nv">$weekly_archive</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># 使用夸克网盘WebDAV上传</span>
<span class="w">    </span><span class="c1"># 需要先配置WebDAV: 在夸克网盘设置中开启WebDAV功能</span>
<span class="w">    </span>curl<span class="w"> </span>-T<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CLOUD_DIR</span><span class="s2">/</span><span class="nv">$weekly_archive</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>-u<span class="w"> </span><span class="s2">&quot;your_username:your_password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span><span class="s2">&quot;https://dav.quark.cn/backups/</span><span class="nv">$weekly_archive</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="c1"># 或者使用rclone (推荐)</span>
<span class="w">    </span><span class="c1"># rclone copy &quot;$CLOUD_DIR/$weekly_archive&quot; quark:backups/</span>

<span class="w">    </span><span class="c1"># 或者使用阿里云盘命令行工具作为备选</span>
<span class="w">    </span><span class="c1"># aliyunpan upload &quot;$CLOUD_DIR/$weekly_archive&quot; &quot;/备份/&quot;</span>

<span class="w">    </span><span class="c1"># 上传成功后清理本地文件</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;网盘上传成功&quot;</span>
<span class="w">        </span>rm<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CLOUD_DIR</span><span class="s2">/</span><span class="nv">$weekly_archive</span><span class="s2">&quot;</span>

<span class="w">        </span><span class="c1"># 清理网盘中的旧备份（保留最近4周）</span>
<span class="w">        </span><span class="c1"># 使用rclone清理旧文件</span>
<span class="w">        </span>rclone<span class="w"> </span>ls<span class="w"> </span>quark:backups/<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;backup_weekly_&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-r<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span>+5<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>size<span class="w"> </span>file<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span>rclone<span class="w"> </span>delete<span class="w"> </span><span class="s2">&quot;quark:backups/</span><span class="nv">$file</span><span class="s2">&quot;</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;删除旧备份: </span><span class="nv">$file</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="k">done</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;网盘上传失败&quot;</span>
<span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;压缩失败&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="k">fi</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;网盘上传完成 - </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>

<p><strong>夸克网盘配置说明</strong>：</p>
<ol>
<li><strong>开启WebDAV</strong>：</li>
<li>登录夸克网盘 → 设置 → WebDAV</li>
<li>
<p>开启WebDAV功能，获取用户名和密码</p>
</li>
<li>
<p><strong>使用rclone配置（推荐）</strong>：
   ```bash
   # 安装rclone
   curl https://rclone.org/install.sh | sudo bash</p>
</li>
</ol>
<p># 配置夸克网盘
   rclone config
   # 选择 WebDAV
   # URL: https://dav.quark.cn
   # 输入用户名和密码
   ```</p>
<ol>
<li><strong>验证配置</strong>：
   <code>bash
   rclone ls quark:</code></li>
</ol>
<h2 id="6">6. 灾难恢复：当末日真的来临</h2>
<p>备份的意义在于恢复。设计恢复流程同样重要：</p>
<h3 id="61">6.1 恢复优先级</h3>
<div class="highlight"><pre><span></span><code>P0 - 核心数据库    ⏱️  RTO: 1小时   RPO: 1小时
P1 - Wiki知识库    ⏱️  RTO: 4小时   RPO: 1天  
P2 - 配置文件      ⏱️  RTO: 8小时   RPO: 1天
P3 - 日志文件      ⏱️  RTO: 24小时  RPO: 1周
</code></pre></div>

<h3 id="62">6.2 恢复脚本</h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># disaster_recovery.sh - 灾难恢复脚本</span>

<span class="nv">RECOVERY_LEVEL</span><span class="o">=</span><span class="nv">$1</span><span class="w">  </span><span class="c1"># P0, P1, P2, P3</span>
<span class="nv">RECOVERY_DATE</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-$(</span>date<span class="w"> </span>+%Y%m%d<span class="k">)</span><span class="si">}</span>

<span class="k">case</span><span class="w"> </span><span class="nv">$RECOVERY_LEVEL</span><span class="w"> </span><span class="k">in</span>
<span class="w">    </span><span class="s2">&quot;P0&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;开始P0级恢复：核心数据库&quot;</span>
<span class="w">        </span><span class="c1"># 从最近的备份恢复MySQL</span>
<span class="w">        </span><span class="nv">latest_backup</span><span class="o">=</span><span class="k">$(</span>ls<span class="w"> </span>-t<span class="w"> </span>/backup/mysql/mysql_backup_*.sql.gz<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="k">)</span>
<span class="w">        </span>zcat<span class="w"> </span><span class="nv">$latest_backup</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p
<span class="w">        </span><span class="p">;;</span>
<span class="w">    </span><span class="s2">&quot;P1&quot;</span><span class="o">)</span><span class="w"> </span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;开始P1级恢复：Wiki知识库&quot;</span>
<span class="w">        </span>rsync<span class="w"> </span>-av<span class="w"> </span>/mnt/nas/file_backups/wiki/<span class="w"> </span>/home/walter/wiki/
<span class="w">        </span><span class="p">;;</span>
<span class="w">    </span><span class="s2">&quot;P2&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;开始P2级恢复：配置文件&quot;</span>
<span class="w">        </span>rsync<span class="w"> </span>-av<span class="w"> </span>/mnt/nas/file_backups/nginx/<span class="w"> </span>/etc/nginx/
<span class="w">        </span><span class="p">;;</span>
<span class="w">    </span><span class="s2">&quot;P3&quot;</span><span class="o">)</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;开始P3级恢复：日志文件&quot;</span><span class="w">  </span>
<span class="w">        </span>rsync<span class="w"> </span>-av<span class="w"> </span>/mnt/nas/file_backups/applications/<span class="w"> </span>/var/log/applications/
<span class="w">        </span><span class="p">;;</span>
<span class="w">    </span>*<span class="o">)</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;无效的恢复级别: </span><span class="nv">$RECOVERY_LEVEL</span><span class="s2">&quot;</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;用法: </span><span class="nv">$0</span><span class="s2"> [P0|P1|P2|P3] [YYYYMMDD]&quot;</span>
<span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">        </span><span class="p">;;</span>
<span class="k">esac</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$RECOVERY_LEVEL</span><span class="s2"> 级恢复完成&quot;</span>
</code></pre></div>

<h2 id="7">7. 总结：备份是程序员的必修课</h2>
<p>经过这次惨痛的教训，我深刻地理解了一个道理：<strong>备份不是可选项，而是必需品</strong>。</p>
<h3 id="71">7.1 我的新备份哲学</h3>
<ol>
<li><strong>自动化优于手动</strong>：人会忘记，机器不会</li>
<li><strong>多样化优于单一</strong>：不要把鸡蛋放在一个篮子里  </li>
<li><strong>验证优于信任</strong>：定期检查备份的完整性</li>
<li><strong>演练优于理论</strong>：定期进行恢复演练</li>
</ol>
<h3 id="72">7.2 投入产出比</h3>
<p>这套备份方案的成本：
- <strong>时间成本</strong>：初期设置2天，后续维护每月1小时
- <strong>硬件成本</strong>：NAS + 外置硬盘，约3000元
- <strong>网盘成本</strong>：夸克网盘会员每年约168元
- <strong>VPS成本</strong>：轻量服务器每年约300元
- <strong>总成本</strong>：第一年约3470元</p>
<p>而数据丢失的成本：
- <strong>时间成本</strong>：重建半年Wiki需要100+小时
- <strong>机会成本</strong>：错失的项目和学习机会<br>
- <strong>心理成本</strong>：无价的焦虑和沮丧</p>
<p><strong>3470元 vs 无价，你选哪个？</strong></p>
<h3 id="73">7.3 最后的忠告</h3>
<p>如果你现在还没有完善的备份方案，<strong>请立即行动</strong>！不要等到灾难降临才后悔。</p>
<p>记住这个公式：</p>
<div class="highlight"><pre><span></span><code>备份的价值 = 数据的价值 × 丢失的概率
</code></pre></div>

<p>对于程序员来说，数据就是我们的生命。保护好它们，就是保护好我们自己。</p>
<p>现在，去检查一下你的备份吧！</p>
<hr>
<p><strong>参考资料：</strong>
- <a href="https://www.backblaze.com/blog/the-3-2-1-backup-strategy/">3-2-1备份策略详解</a>
- <a href="https://wiki.archlinux.org/title/System_backup">Linux备份最佳实践</a>
- <a href="https://www.redhat.com/en/topics/data-storage/what-is-disaster-recovery">企业级灾难恢复规划</a></p>
<hr/>
<p>本作品采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/journal.html">journal</a>
      <a href="./tag/blog.html">blog</a>
      <a href="./tag/backup.html">backup</a>
      <a href="./tag/disaster-recovery.html">disaster-recovery</a>
      <a href="./tag/linux.html">linux</a>
      <a href="./tag/devops.html">devops</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="./mi-ma-cun-chu-de-yi-zhu.html" title="密码存储的艺术">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="./zhi-shi-gong-zuo-zhe-ru-he-gou-jian-zi-ji-de-zhi-shi-ku.html" title="知识工作者如何构建自己的知识库">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./shi-yong-di-yi-xing-yuan-li-zuo-jia-gou-she-ji.html">使用第一性原理做架构设计</a></li>
      <li><a href="./zhi-chang-zhong-na-xie-huo-de-zui-jiu-de-fang-fa-lun-suo-xie.html">职场中那些“活得最久”的方法论缩写</a></li>
      <li><a href="./zui-tong-yong-de-6-da-yan-jiang-kuang-jia.html">最通用的 6 大演讲框架</a></li>
      <li><a href="./bie-liao-2025.html">别了, 2025</a></li>
      <li><a href="./ai-agent-she-ji-yu-luo-di.html">AI Agent 设计与落地</a></li>
    </ul>
  </div>



<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>
</body>
</html>