
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">


  <link rel="stylesheet"
        type="text/css"
        href="./theme/stork/stork.css" />

  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="Daily minute" />
<meta name="keywords" content="javascript, blog">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="Web 的王者 Javascript 愈战愈勇"/>
  <meta property="og:description" content="Daily minute"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./web-de-wang-zhe-javascript-yu-zhan-yu-yong.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2021-03-02 10:20:00+08:00"/>
  <meta property="article:modified_time" content="2021-03-02 19:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Program"/>
  <meta property="article:tag" content="javascript"/>
  <meta property="article:tag" content="blog"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; Web 的王者 Javascript 愈战愈勇</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>

    <div class="stork">
      <input class="stork-input" type="text" autocomplete="off" name="q" data-stork="sitesearch" placeholder="Search..." onclick="loadStorkIndex()"/>
      <div class="stork-output" data-stork="sitesearch-output"></div>
    </div>

    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="web-de-wang-zhe-javascript-yu-zhan-yu-yong">Web 的王者 Javascript 愈战愈勇</h1>
    <p>
      Posted on Tue 02 March 2021 in <a href="./category/program.html">Program</a>

    </p>
  </header>


  <div>
    <h1 id="quote">Quote</h1>
<blockquote>
<p>Reading make a full man; conference a ready man; and writing an exact man. And therefore, if a man write little, he had need have a great memory; if he confer little, he had need have a present wit; and if he read little, he had need have much cunning, to seem to know that he doth not.</p>
<p>读书使人充实，讨论使人机智，笔记使人准确。因此不常做笔记者须记忆力特强，不常讨论者须天生聪颖，不常读书者须欺世有术，始能无知而显有知。</p>
<p>Histories make men wise; poets witty; the mathematics subtile; natural philosophy deep; moral grave; logic and rhetoric able to contend. Abeunt studia in morse. (Studeis go to make up a man’s character.)</p>
<p>读史使人明智，读诗使人灵秀，数学使人周密，科学使人深刻，伦理学使人庄重，逻辑修辞之学使人善辩；凡有所学，皆成性格。</p>
<p>-- 培根</p>
</blockquote>
<h1 id="thinking">Thinking</h1>
<p>从语言设计层面来说, JavaScript 不是一个高质量的语言,我曾经写过一篇吐槽文章, <a href="https://www.jianshu.com/p/e301932c5b6d" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="&quot;C++程序员眼中丑陋的 JS&quot;">"C++程序员眼中丑陋的 JS"</a>.</p>
<p>尽管如此, 在浏览器中,服务器中,移动设备上甚至嵌入式系统中 JavaScript 的身影无处不在, nodejs 的兴起使得 JavaScript 从前端拓展到后端,成为全栈语言. 它生机勃勃, 成长迅速, 在互联网世界中独领风骚. 2015 年发布的 ECMAScript 标准,  JavaScript 从3.0 逐渐到了 6.0, 现代语言的高级特性它基本上都有, 其安全性和可靠性也得到了提高.</p>
<p>Javascript 的性能一直是让人诟病的地方,自从有了 WebRTC 和 WebAssembly, 在 Web 页面上也能做很多以前需要用 C++ 语言才能实现的应用,比如网络视频会议, 3D 游戏等.</p>
<p>NodeJS, 和 Express/Koa/Hapi, React/Angular/VUE 等框架, npm, gulp, webpack 等工具, Javascript 的生态系统也建立起来了.</p>
<p>作为一名全栈工程师,有必要回炉再造, 系统地复习和学习 JavaScript.</p>
<h1 id="codes">Codes</h1>
<p>一百行写一个 Web Restful 服务</p>
<ul>
<li>vi index.js</li>
</ul>
<div class="highlight"><pre><span></span><code>&quot;use strict&quot;
const fs = require(&#39;fs&#39;);
const http = require(&#39;http&#39;);
const https = require(&#39;https&#39;);
const bodyParser = require(&#39;body-parser&#39;);
const sqlite3 = require(&#39;sqlite3&#39;);


const log4js = require(&quot;log4js&quot;);
log4js.configure({
  appenders: {
    &#39;stdout&#39;: { type: &#39;stdout&#39; },
    &#39;jshelper&#39;: {
      filename: &quot;pt_metrics.log&quot;,
      type: &#39;dateFile&#39;,
      pattern: &quot;yyyy-MM-dd&quot;,
      keepFileExt: true,
      maxLogSize: 1024 * 1024 * 10, //1024 * 1024 * 1 = 10M
      backups: 2,
      alwaysIncludePattern: true,
      daysToKeep: 7,
      layout: {
        type    : &quot;pattern&quot;,
        pattern : &quot;%d{ABSOLUTE} %[%-5p%] %c %x{singleLine}&quot;,
        tokens: {
          singleLine : function(logEvent) {
            // logEvent.data is an array that contains the arguments to the log.info() call
            return  JSON.stringify(logEvent.data[0]);
          }
        }
      }
    }
  },
  categories: { default: {
      appenders: [&quot;stdout&quot;,&quot;jshelper&quot;],
      level: &quot;info&quot; }
  }
});


const express = require(&#39;express&#39;);
const app = express();
const path = require(&#39;path&#39;);

const logger = log4js.getLogger(&quot;jshelper&quot;);
const PORT = 8080;

const options = {
  index: &quot;index.html&quot;
};


const db = new sqlite3.Database(&#39;./report.db&#39;, (err) =&gt; {
  if (err) {
    console.error(&quot;Erro opening database &quot; + err.message);
  } else {


    db.run(`CREATE TABLE report(
            id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
            type NVARCHAR(32)  NOT NULL,
            category  NVARCHAR(32),
            label     NVARCHAR(64),
            content TEXT  NOT NULL,
            time Timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
        )`, (err) =&gt; {
      if (err) {
        console.log(&quot;Table already exists.&quot;);
      }
      let insert = &#39;INSERT INTO report (type, category, label, content) VALUES (?,?, ? ,?)&#39;;
      db.run(insert, [&quot;event&quot;,  &quot;system&quot;, &quot;PT&quot;, &quot;startup&quot;]);
    });
  }
});


app.use(&#39;/&#39;, express.static(path.join(__dirname, &#39;/&#39;), options));


// parse requests of content-type - application/x-www-form-urlencoded and application/json
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());


app.get(&#39;/api/v1/ping&#39;, (req, res) =&gt; {
  res.json({&quot;message&quot;: &quot;Healthy&quot;, &quot;serviceState&quot;: &quot;online&quot;});
});


app.post(&#39;/api/v1/events&#39;, function(request, response) {
  console.log(&quot;received event: &quot;, request.body);      // your JSON
  response.send({&quot;result&quot;: &quot;OK&quot;});
  logger.info(request.body);
});


const httpServer = http.createServer(app);

console.log(&#39;Running local tool http page on &#39; + PORT);

httpServer.listen(PORT);
</code></pre></div>

<h1 id="words">Words</h1>
<ul>
<li>asteroid</li>
</ul>
<p>collapsed
英 /kəˈlæpst/  美 /kəˈlæpst/ 全球(英国)<br>
adj. 倒塌的；暴跌的；收缩的；倾陷了的
v. 倒塌；崩溃（collapse的过去分词）；价格暴跌</p>
<p>Share prices collapsed after news of poor trading figures. 
在交易数额不佳的消息公布后，股票价格暴跌。</p>
<ul>
<li>mammal 
英 /ˈmæml/  美 /ˈmæml/  全球(美国)<br>
n. [脊椎] 哺乳动物</li>
</ul>
<p>The existense of dinosaurs blocked the evolution of mailams </p>
<ul>
<li>Extinction</li>
</ul>
<p>Extinction 
英 /ɪkˈstɪŋkʃn/  美 /ɪkˈstɪŋkʃn/  全球(美国)  </p>
<p>n. 灭绝；消失；消灭；废止</p>
<p>Mass extinction events have played an important part in the evolution of life.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/javascript.html">javascript</a>
      <a href="./tag/blog.html">blog</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="./yong-ni-de-liu-lan-qi-pai-zhao-lu-yin-he-lu-xiang.html" title="用你的浏览器拍照,录音和录像">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="./journal-on-2021-04-24.html" title="Journal on 2021-04-24">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./easy-jwt-implementation-by-casbin-library.html">Easy JWT implementation by Casbin library</a></li>
      <li><a href="./wo-men-xu-yao-fang-fa-lun-ma.html">我们需要方法论吗</a></li>
      <li><a href="./ren-sheng-xu-yao-zuo-jian-fa.html">人生需要做减法</a></li>
      <li><a href="./xiao-chu-suo-shi.html">消除琐事</a></li>
      <li><a href="./shi-yao-shi-pkce.html">什么是 PKCE</a></li>
    </ul>
  </div>



<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>  <script>
    window.loadStorkIndex = function () {
      stork.initialize("./theme/stork/stork.wasm")
      stork.register("sitesearch", "./search-index.st", { showProgress: false });
    }
  </script>
  <script src="./theme/stork/stork.js"></script>

</body>
</html>