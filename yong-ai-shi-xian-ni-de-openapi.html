
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="用 AI 实现你用OpenAPI" />
<meta name="keywords" content="journal, blog">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="用 AI 实现你的 OpenAPI"/>
  <meta property="og:description" content="用 AI 实现你用OpenAPI"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./yong-ai-shi-xian-ni-de-openapi.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2025-10-27 20:20:00+08:00"/>
  <meta property="article:modified_time" content="2025-10-27 22:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Journal"/>
  <meta property="article:tag" content="journal"/>
  <meta property="article:tag" content="blog"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; 用 AI 实现你的 OpenAPI</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="yong-ai-shi-xian-ni-de-openapi">用 AI 实现你的 OpenAPI</h1>
    <p>
      Posted on Mon 27 October 2025 in <a href="./category/journal.html">Journal</a>

    </p>
  </header>


  <div>
    <table>
<thead>
<tr>
<th><strong>Abstract</strong></th>
<th>用 AI 实现你的 OpenAPI</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authors</strong></td>
<td><a href="https://www.fanyamin.com">Walter Fan</a></td>
</tr>
<tr>
<td> <strong>Category</strong>  </td>
<td> learning note  </td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>v1.0</td>
</tr>
<tr>
<td><strong>Updated</strong></td>
<td>2025-10-27</td>
</tr>
<tr>
<td><strong>License</strong></td>
<td><a href="http://creativecommons.org/licenses/by-nc-nd/4.0">CC-BY-NC-ND 4.0</a></td>
</tr>
</tbody>
</table>
<h1 id="openapi-api">用 OpenAPI 来定义你的 API</h1>
<blockquote>
<p>关键词：OpenAPI、Swagger、API 文档、活文档、文档驱动编程、AI 辅助编程</p>
</blockquote>
<hr>
<h2 id="openapi">一、OpenAPI 是什么？</h2>
<p>一句话概括：</p>
<blockquote>
<p><strong>OpenAPI 是用来描述 RESTful API 的标准格式。</strong></p>
</blockquote>
<p>它不是一个框架，也不是一个库，
而是一个<strong>文档规范（Specification）</strong>——
类似于接口的“蓝图”或“契约（Contract）”。</p>
<p>就像 C/C++ 里的头文件 <code>.h</code>，或者 Java 里的接口 <code>interface</code>，
OpenAPI 描述了：</p>
<ul>
<li>API 提供哪些路径（endpoints）</li>
<li>每个路径支持哪些 HTTP 方法（GET、POST、PUT、DELETE）</li>
<li>参数、请求体、返回值长什么样</li>
<li>返回码、错误格式等</li>
</ul>
<p>让 <strong>人</strong> 和 <strong>机器</strong> 都能理解你的接口。</p>
<hr>
<h2 id="_1">二、一个简单例子</h2>
<p>比如你有个用户服务：</p>
<div class="highlight"><pre><span></span>GET /api/users/{id}
</pre></div>


<p>返回用户信息。</p>
<p>你可以用 OpenAPI（YAML 格式）这样描述它：</p>
<div class="highlight"><pre><span></span><span class="nt">openapi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0.3</span>
<span class="nt">info</span><span class="p">:</span>
<span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">用户服务 API</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">paths</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">/api/users/{id}</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">获取指定用户信息</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">id</span>
<span class="w">          </span><span class="nt">in</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path</span>
<span class="w">          </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">成功返回用户信息</span>
<span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/User&#39;</span>
<span class="nt">components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">User</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">      </span><span class="nt">properties</span><span class="p">:</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">email</span><span class="p">:</span>
<span class="w">          </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</pre></div>


<p>这就是一份合法的 <strong>OpenAPI 文档</strong>。</p>
<hr>
<h2 id="_2">三、它能做什么？</h2>
<p>这份文档不是摆设。
有了它，你可以做很多事：</p>
<table>
<thead>
<tr>
<th>用途</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>✅ <strong>生成 API 文档</strong></td>
<td>自动生成漂亮的网页文档（Swagger UI、Redoc）</td>
</tr>
<tr>
<td>✅ <strong>生成客户端 SDK</strong></td>
<td>一键生成 Java、Go、Python、TypeScript 的 API 调用代码</td>
</tr>
<tr>
<td>✅ <strong>生成服务端骨架</strong></td>
<td>一键生成控制器、路由模板</td>
</tr>
<tr>
<td>✅ <strong>校验请求/响应</strong></td>
<td>自动验证参数、类型、格式是否符合定义</td>
</tr>
<tr>
<td>✅ <strong>Mock 服务</strong></td>
<td>没有后端也能跑接口联调测试</td>
</tr>
</tbody>
</table>
<p>这就是为什么很多团队在 CI/CD 里都加上了 OpenAPI 检查：
<strong>接口变更前先改 OpenAPI 文件，再生成代码或文档。</strong></p>
<hr>
<h2 id="swagger">四、和 Swagger 的关系</h2>
<p>很多人一开始以为 “Swagger = OpenAPI”，其实：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OpenAPI Specification (OAS)</strong></td>
<td>规范标准（由 Linux Foundation 管理）</td>
</tr>
<tr>
<td><strong>Swagger</strong></td>
<td>一系列基于 OpenAPI 的工具（由 SmartBear 公司维护）</td>
</tr>
<tr>
<td><strong>Swagger UI / Editor / Codegen</strong></td>
<td>实现 OpenAPI 的可视化与代码生成工具</td>
</tr>
</tbody>
</table>
<p>所以：</p>
<ul>
<li>规范：<strong>OpenAPI</strong></li>
<li>工具：<strong>Swagger</strong></li>
</ul>
<hr>
<h2 id="_3">五、语言生态（针对你熟悉的几门语言）</h2>
<table>
<thead>
<tr>
<th>语言</th>
<th>常见框架</th>
<th>OpenAPI 工具</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Java</strong></td>
<td>Spring Boot</td>
<td>Springdoc OpenAPI（推荐）、Swagger-Core</td>
</tr>
<tr>
<td><strong>Go</strong></td>
<td>Gin / Echo / Fiber</td>
<td>swaggo/swag、go-openapi、oapi-codegen</td>
</tr>
<tr>
<td><strong>Python</strong></td>
<td>FastAPI、Flask</td>
<td>FastAPI 原生支持、flasgger</td>
</tr>
<tr>
<td><strong>C++</strong></td>
<td>Pistache、Restbed</td>
<td>OpenAPI Generator 生成代码骨架</td>
</tr>
</tbody>
</table>
<p><strong>举个 Java 的例子：</strong></p>
<div class="highlight"><pre><span></span><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
<span class="nd">@Tag</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;用户管理&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;根据ID获取用户信息&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">User</span><span class="w"> </span><span class="nf">getUser</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">Long</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;alice@example.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>配合 <code>springdoc-openapi</code>，你可以自动生成：</p>
<ul>
<li><code>/v3/api-docs</code>（JSON 格式）</li>
<li><code>/swagger-ui.html</code>（网页文档）</li>
</ul>
<hr>
<h2 id="_4">六、版本与演进</h2>
<table>
<thead>
<tr>
<th>版本</th>
<th>时间</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenAPI 2.0</td>
<td>以前叫 Swagger 2.0</td>
<td>JSON/YAML 支持</td>
</tr>
<tr>
<td>OpenAPI 3.0</td>
<td>主流版本</td>
<td>增强请求体定义</td>
</tr>
<tr>
<td>OpenAPI 3.1</td>
<td>最新</td>
<td>完全支持 JSON Schema 2020-12</td>
</tr>
</tbody>
</table>
<p>建议现在用 <strong>3.0+</strong>。</p>
<hr>
<h2 id="openapi-living-documentation">七、OpenAPI 与活文档（Living Documentation）</h2>
<h3 id="_5">什么是活文档？</h3>
<p>传统 API 文档最大的问题是什么？<strong>容易过时</strong>。</p>
<p>今天改了接口，明天忘记更新文档；文档和代码不一致，导致前后端对接时频频出错。这是很多团队的痛点。</p>
<p><strong>活文档（Living Documentation）</strong> 的理念是：<strong>让文档成为代码的一部分，随代码自动更新</strong>。</p>
<h3 id="openapi_1">OpenAPI 如何实现活文档？</h3>
<p>OpenAPI 通过以下方式实现活文档：</p>
<h4 id="1-code-as-documentation">1. <strong>代码即文档（Code as Documentation）</strong></h4>
<p>通过注解或装饰器，让文档定义直接写在代码里：</p>
<div class="highlight"><pre><span></span><span class="nd">@Operation</span><span class="p">(</span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;创建用户&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;创建一个新用户账户&quot;</span><span class="p">)</span>
<span class="nd">@PostMapping</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">createUser</span><span class="p">(</span>
<span class="w">    </span><span class="nd">@RequestBody</span><span class="w"> </span><span class="nd">@Valid</span><span class="w"> </span><span class="n">UserCreateRequest</span><span class="w"> </span><span class="n">request</span>
<span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 实现代码</span>
<span class="p">}</span>
</pre></div>


<p>当代码变更时，OpenAPI 文档自动更新。</p>
<h4 id="2-documentation-driven-development">2. <strong>文档驱动开发（Documentation-Driven Development）</strong></h4>
<p>另一种方式是<strong>先写文档，再写代码</strong>：</p>
<ol>
<li>在 <code>openapi.yaml</code> 中定义接口规范</li>
<li>使用工具生成服务端骨架代码</li>
<li>实现业务逻辑</li>
<li>运行时验证请求/响应是否符合文档</li>
</ol>
<p>这样文档永远是"最新版本"，因为它就是<strong>唯一的真实来源（Single Source of Truth）</strong>。</p>
<h4 id="3">3. <strong>持续验证</strong></h4>
<p>在 CI/CD 流程中加入文档校验：</p>
<div class="highlight"><pre><span></span><span class="c1"># .github/workflows/api-docs.yml</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Validate OpenAPI</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">npx @stoplight/spectral-cli lint openapi.yaml</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Generate SDK</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">openapi-generator generate -i openapi.yaml -g typescript-axios</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test against spec</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">npm run test:api-contract</span>
</pre></div>


<p>每次代码提交，都会验证文档与实现的一致性。</p>
<hr>
<h3 id="_6">活文档的价值</h3>
<table>
<thead>
<tr>
<th>传统文档</th>
<th>活文档</th>
</tr>
</thead>
<tbody>
<tr>
<td>手动维护，容易过时</td>
<td>自动生成，始终同步</td>
</tr>
<tr>
<td>静态 HTML/PDF，无法交互</td>
<td>交互式 UI，可直接测试接口</td>
</tr>
<tr>
<td>仅面向人类阅读</td>
<td>机器可读，可生成代码、进行验证</td>
</tr>
<tr>
<td>需要额外工具链</td>
<td>集成在开发流程中</td>
</tr>
</tbody>
</table>
<p><strong>活文档让文档从"负担"变成"资产"</strong>。</p>
<hr>
<h2 id="ai">八、文档驱动编程与 AI 辅助编程</h2>
<h3 id="_7">文档驱动编程的核心思想</h3>
<p><strong>文档驱动编程（Documentation-Driven Development, DDD）</strong> 的核心是：</p>
<blockquote>
<p><strong>文档不是开发的副产品，而是开发的起点和契约。</strong></p>
</blockquote>
<p>先定义"做什么"（What），再实现"怎么做"（How）。</p>
<p>这与<strong>契约驱动开发（Contract-Driven Development）</strong> 一脉相承：</p>
<div class="highlight"><pre><span></span>OpenAPI 文档 = API 契约
     ↓
代码实现 = 契约的实现
     ↓
自动验证 = 确保实现符合契约
</pre></div>


<hr>
<h3 id="ai_1">AI 辅助编程时代的机遇</h3>
<p>在 AI 辅助编程（如 GitHub Copilot、Cursor、Claude 等）的时代，<strong>结构化文档的价值被放大</strong>：</p>
<h4 id="1-ai-openapi">1. <strong>AI 能够理解 OpenAPI 规范</strong></h4>
<p>现代 AI 模型经过大量代码和文档训练，对 OpenAPI 规范非常熟悉。当你提供 OpenAPI 文档时，AI 可以：</p>
<p><strong>场景一：根据文档生成代码</strong></p>
<div class="highlight"><pre><span></span>你：根据这个 OpenAPI 文档，生成 Spring Boot Controller

AI：分析 openapi.yaml → 生成完整的 Controller 代码
</pre></div>


<div class="highlight"><pre><span></span><span class="c1"># openapi.yaml</span>
<span class="nt">paths</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">/api/users/{id}</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">获取用户信息</span>
<span class="w">      </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">id</span>
<span class="w">          </span><span class="nt">in</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path</span>
<span class="w">          </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
<span class="w">      </span><span class="nt">responses</span><span class="p">:</span>
<span class="w">        </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<span class="w">          </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">成功</span>
<span class="w">          </span><span class="nt">content</span><span class="p">:</span>
<span class="w">            </span><span class="nt">application/json</span><span class="p">:</span>
<span class="w">              </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">                </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/User&#39;</span>
</pre></div>


<p>AI 可以据此生成：</p>
<div class="highlight"><pre><span></span><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/api/users&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserController</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/{id}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">ResponseEntity</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUser</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// AI 生成的代码骨架</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><strong>场景二：根据文档生成测试用例</strong></p>
<div class="highlight"><pre><span></span>你：为这个 API 生成完整的测试用例

AI：分析文档 → 生成单元测试、集成测试、契约测试
</pre></div>


<p><strong>场景三：文档补全与优化</strong></p>
<div class="highlight"><pre><span></span>你：检查这个 OpenAPI 文档是否完整，补充缺失的部分

AI：分析现有文档 → 发现缺失字段 → 提供建议和补全
</pre></div>


<hr>
<h4 id="2-ai">2. <strong>AI 作为"文档翻译器"</strong></h4>
<p>AI 可以在不同抽象层次之间转换：</p>
<div class="highlight"><pre><span></span>自然语言需求
    ↓ (AI 理解)
OpenAPI 文档
    ↓ (AI 生成)
代码实现
    ↓ (AI 验证)
测试用例
</pre></div>


<p><strong>实际工作流示例：</strong></p>
<div class="highlight"><pre><span></span>开发者：我需要一个用户注册接口，接收邮箱和密码，返回用户ID和token

AI（分析需求）：
→ 生成 OpenAPI 文档片段
→ 生成 Controller 代码
→ 生成 Service 层代码
→ 生成 DTO 类
→ 生成测试用例
→ 生成 API 文档页面
</pre></div>


<hr>
<h4 id="3-ai">3. <strong>AI 辅助的文档审查</strong></h4>
<p>AI 可以帮助审查 OpenAPI 文档的质量：</p>
<ul>
<li><strong>一致性检查</strong>：字段命名是否统一？状态码使用是否规范？</li>
<li><strong>完整性检查</strong>：是否所有端点都有描述？错误响应是否定义？</li>
<li><strong>最佳实践</strong>：是否符合 RESTful 设计原则？版本控制是否合理？</li>
</ul>
<hr>
<h3 id="ai-api">实践建议：构建 AI 友好的 API 文档</h3>
<p>要让 AI 更好地理解和使用你的 OpenAPI 文档，建议：</p>
<h4 id="1">✅ 1. <strong>添加详细的描述</strong></h4>
<div class="highlight"><pre><span></span><span class="nt">paths</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">/api/users/{id}</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">get</span><span class="p">:</span>
<span class="w">      </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">获取用户信息</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">根据用户ID获取用户详细信息。</span>
<span class="w">        </span><span class="no">如果用户不存在，返回 404。</span>
<span class="w">        </span><span class="no">需要 Bearer Token 认证。</span>
<span class="w">      </span><span class="nt">operationId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">getUserById</span><span class="w">  </span><span class="c1"># 给 AI 一个明确的标识</span>
</pre></div>


<h4 id="2-examples">✅ 2. <strong>使用示例（Examples）</strong></h4>
<div class="highlight"><pre><span></span><span class="nt">responses</span><span class="p">:</span>
<span class="w">  </span><span class="s">&#39;200&#39;</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">application/json</span><span class="p">:</span>
<span class="w">        </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/User&#39;</span>
<span class="w">        </span><span class="nt">examples</span><span class="p">:</span>
<span class="w">          </span><span class="nt">success</span><span class="p">:</span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span>
<span class="w">              </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span>
<span class="w">              </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;alice@example.com&quot;</span>
</pre></div>


<p>示例让 AI 更好地理解数据结构。</p>
<h4 id="3_1">✅ 3. <strong>明确的错误定义</strong></h4>
<div class="highlight"><pre><span></span><span class="nt">responses</span><span class="p">:</span>
<span class="w">  </span><span class="s">&#39;400&#39;</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">请求参数错误</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">application/json</span><span class="p">:</span>
<span class="w">        </span><span class="nt">schema</span><span class="p">:</span>
<span class="w">          </span><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#/components/schemas/Error&#39;</span>
<span class="w">  </span><span class="s">&#39;404&#39;</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">用户不存在</span>
<span class="w">  </span><span class="s">&#39;500&#39;</span><span class="p p-Indicator">:</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">服务器内部错误</span>
</pre></div>


<h4 id="4-schema">✅ 4. <strong>使用语义化的 schema 名称</strong></h4>
<div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">User</span><span class="p">:</span><span class="w">           </span><span class="c1"># ✅ 好：语义清晰</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="w">    </span><span class="nt">UserResponse</span><span class="p">:</span><span class="w">   </span><span class="c1"># ✅ 好：明确是响应对象</span>
<span class="w">    </span><span class="nt">UserCreateRequest</span><span class="p">:</span><span class="w">  </span><span class="c1"># ✅ 好：明确是请求对象</span>
</pre></div>


<p>而不是：</p>
<div class="highlight"><pre><span></span><span class="nt">components</span><span class="p">:</span>
<span class="w">  </span><span class="nt">schemas</span><span class="p">:</span>
<span class="w">    </span><span class="nt">User1</span><span class="p">:</span><span class="w">          </span><span class="c1"># ❌ 差：无意义</span>
<span class="w">    </span><span class="nt">Data</span><span class="p">:</span><span class="w">           </span><span class="c1"># ❌ 差：太泛化</span>
</pre></div>


<hr>
<h3 id="ai_2">AI 辅助编程的未来展望</h3>
<p>随着 AI 能力的提升，文档驱动编程 + AI 辅助编程的组合将会：</p>
<ol>
<li><strong>降低 API 设计门槛</strong>：非技术人员也能通过自然语言描述生成 API 文档</li>
<li><strong>加速开发迭代</strong>：从文档到代码的转换时间大幅缩短</li>
<li><strong>提升代码质量</strong>：AI 根据文档生成代码，天然保证接口一致性</li>
<li><strong>自动化测试生成</strong>：AI 根据 OpenAPI 文档自动生成全面的测试用例</li>
</ol>
<hr>
<h2 id="_8">九、实践建议（经验谈）</h2>
<p>对老程序员来说，最重要的不是学语法，而是掌握 <strong>使用流程</strong>：</p>
<ol>
<li><strong>先定义 OpenAPI 文档</strong>（可手写或用 Swagger Editor，或让 AI 帮你生成）</li>
<li><strong>让后端代码实现它</strong>（生成接口骨架或校验，或让 AI 根据文档生成代码）</li>
<li><strong>让前端或测试通过文档调用</strong>（生成 SDK 或 Mock 服务）</li>
<li><strong>持续集成里验证文档是否同步</strong>（自动化检查）</li>
</ol>
<p><strong>在 AI 时代，这个流程更加顺畅：</strong></p>
<div class="highlight"><pre><span></span>需求 → AI 生成 OpenAPI 文档 → AI 生成代码骨架 → 人工实现业务逻辑 → AI 生成测试 → 自动化验证
</pre></div>


<p>长期坚持下来，你的项目会非常规范：</p>
<ul>
<li>接口变更有据可查</li>
<li>前后端解耦</li>
<li>SDK、测试、Mock 一键生成</li>
<li><strong>AI 辅助开发效率大幅提升</strong></li>
</ul>
<hr>
<h2 id="_9">十、小结</h2>
<blockquote>
<p><strong>OpenAPI = Web 接口的"IDL"（接口定义语言）</strong>。
它让 REST API 变得像 gRPC、Thrift 一样可描述、可生成、可验证。</p>
</blockquote>
<p>更重要的是，在 AI 辅助编程的时代：</p>
<blockquote>
<p><strong>OpenAPI + 活文档 + AI = 高效的 API 开发范式</strong></p>
<p>文档不仅是给人看的，更是给机器（包括 AI）读的。
一份好的 OpenAPI 文档，是 AI 理解你的接口、生成代码、进行测试的"知识图谱"。</p>
</blockquote>
<p><hr/>
本作品采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可。</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/journal.html">journal</a>
      <a href="./tag/blog.html">blog</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="./rang-java-cheng-xu-gao-bie-fan-wen-ru-jie.html" title="让 Java 程序告别繁文缛节">
      <i class="fa fa-angle-left"></i> Previous Post
    </a>
    <a class="btn float-right" href="./cheng-xu-yuan-de-wei-lai-zai-na-li.html" title="程序员的未来在哪里">
      Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4>You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="./tips-for-vibe-coding-with-cursor-bie-rang-ai-cai-ni-de-xin-si.html">Tips for Vibe Coding with Cursor: 别让 AI 猜你的心思</a></li>
      <li><a href="./vibe-coding-from-0-to-1.html">Vibe Coding from 0 to 1</a></li>
      <li><a href="./yin-dan-lai-liao-ma.html">银弹来了吗?</a></li>
      <li><a href="./spec-driven-development.html">Spec Driven Development</a></li>
      <li><a href="./vibe-bian-cheng-de-xin-fan-shi-zai-ai-shi-dai-zhong-xin-ding-yi-ruan-jian-kai-fa.html">Vibe 编程的新范式：在 AI 时代重新定义软件开发</a></li>
    </ul>
  </div>



<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>
</body>
</html>