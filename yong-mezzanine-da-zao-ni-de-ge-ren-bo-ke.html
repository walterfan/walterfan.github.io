
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="./theme/pygments/github.min.css">



  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/solid.css">


  <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
  <link rel="icon" href="./images/favicon.ico" type="image/x-icon">










 

<meta name="author" content="Walter Fan" />
<meta name="description" content="Daily minute" />
<meta name="keywords" content="journal, blog">


  <meta property="og:site_name" content="Walter Fan's Blog"/>
  <meta property="og:title" content="用 Mezzanine 打造你的个人博客"/>
  <meta property="og:description" content="Daily minute"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="./yong-mezzanine-da-zao-ni-de-ge-ren-bo-ke.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2020-05-30 10:20:00+08:00"/>
  <meta property="article:modified_time" content="2020-05-30 19:30:00+08:00"/>
  <meta property="article:author" content="./author/walter-fan.html">
  <meta property="article:section" content="Journal"/>
  <meta property="article:tag" content="journal"/>
  <meta property="article:tag" content="blog"/>
  <meta property="og:image" content="./images/walterfan.jpg">

  <title>Walter Fan's Blog &ndash; 用 Mezzanine 打造你的个人博客</title>


</head>
<body class="light-theme">

<aside>
  <div>
    <a href="./">
      <img src="./images/walterfan.jpg" alt="Walter Fan" title="Walter Fan">
    </a>

    <h1>
      <a href="./">Walter Fan</a>
    </h1>

    <p>手握灵珠常奋笔, 心开天籁不吹箫</p>


    <nav>
      <ul class="list">



          <li>
            <a target="_self" href="tao.html" >tao</a>
          </li>
          <li>
            <a target="_self" href="interest.html" >interest</a>
          </li>
          <li>
            <a target="_self" href="/wordpress" >notebook</a>
          </li>
          <li>
            <a target="_self" href="bookmark.html" >bookmark</a>
          </li>
          <li>
            <a target="_self" href="/webrtc/examples/index.html" >webrtc</a>
          </li>
          <li>
            <a target="_self" href="https://github.com/walterfan" >github</a>
          </li>
          <li>
            <a target="_self" href="https://www.jianshu.com/u/e0b365801f48" >技术文章</a>
          </li>
          <li>
            <a target="_self" href="consultation.html" >咨询业务</a>
          </li>
          <li>
            <a target="_self" href="https://weibo.com/walterfan" >我的微博</a>
          </li>
          <li>
            <a target="_self" href="about.html" >关于自己</a>
          </li>
      </ul>
    </nav>

    <ul class="social">
      <li>
        <a class="sc-github"
           href="http://github.com/walterfan"
           target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
    </ul>
  </div>

</aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="yong-mezzanine-da-zao-ni-de-ge-ren-bo-ke">用 Mezzanine 打造你的个人博客</h1>
    <p>
      Posted on Sat 30 May 2020 in <a href="./category/journal.html">Journal</a>

    </p>
  </header>


  <div>
    <h1>闲言碎语</h1>
<ul>
<li>铁幕缓缓落下</li>
</ul>
<p>Reviewed trump's statement today, it was like a battle letter. He found the scapegoat and would hold it tightly. </p>
<p>A new cold war is coming. Whatever it is, you can't stop the torrent of the times, life still has to continue, do your own thing and realize your small dream in the disappointing world.</p>
<h1>How to use Mezzanine</h1>
<h2>install python and virtualenv</h2>
<ul>
<li>take ubuntu as example</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nv">apt</span><span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="nv">python3</span>
<span class="nv">pip3</span><span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="nv">virtualenv</span>
#<span class="k">then</span><span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">required</span><span class="w"> </span><span class="nv">libraries</span>

<span class="nv">virtualenv</span><span class="w"> </span><span class="o">-</span><span class="nv">p</span><span class="w"> </span><span class="nv">python3</span><span class="w"> </span><span class="nv">venv</span>
<span class="nv">source</span><span class="w"> </span><span class="nv">venv</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">activate</span>
<span class="nv">pip</span><span class="w"> </span><span class="nv">install</span><span class="w"> </span><span class="nv">mezzanine</span>
</code></pre></div>

<h2>create your project</h2>
<div class="highlight"><pre><span></span><code>mezzanine-project pims
</code></pre></div>

<h2>Make configuration</h2>
<div class="highlight"><pre><span></span><code>cd pims
vi pims/local_settings.py
</code></pre></div>

<ul>
<li>You need to add your server address into ALLOWED_HOSTS=['1.2.3.4']</li>
</ul>
<div class="highlight"><pre><span></span><code>ALLOWED_HOSTS=[&#39;1.2.3.4&#39;]
SITE_PREFIX = &#39;min&#39;
</code></pre></div>

<ul>
<li>vi pims/urls.py</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">mezzanine.blog</span> <span class="kn">import</span> <span class="n">views</span> <span class="k">as</span> <span class="n">blog_views</span>

<span class="n">url</span><span class="p">(</span><span class="s2">&quot;^min/admin/&quot;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>

<span class="n">urlpatterns</span> <span class="o">+=</span> <span class="p">[</span>


    <span class="c1">#url(&quot;^min/$&quot;, direct_to_template, {&quot;template&quot;: &quot;index.html&quot;}, name=&quot;home&quot;),</span>
    <span class="n">url</span><span class="p">(</span><span class="s2">&quot;^min/$&quot;</span><span class="p">,</span> <span class="n">blog_views</span><span class="o">.</span><span class="n">blog_post_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;home&quot;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s2">&quot;^</span><span class="si">%s</span><span class="s2">/&quot;</span> <span class="o">%</span> <span class="n">settings</span><span class="o">.</span><span class="n">SITE_PREFIX</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s2">&quot;mezzanine.urls&quot;</span><span class="p">))</span>
</code></pre></div>

<ul>
<li>then create db and start the server</li>
</ul>
<div class="highlight"><pre><span></span><code>python manage.py createdb --noinput
python manage.py runserver 1.2.3.4:8080
</code></pre></div>

<p>then write a startup.sh</p>
<div class="highlight"><pre><span></span><code>gunicorn --bind 0.0.0.0:8080 pims.wsgi &amp;
</code></pre></div>

<h1>Install nginx and make configration</h1>
<ul>
<li>install nginx</li>
</ul>
<div class="highlight"><pre><span></span><code>apt install nginx
</code></pre></div>

<ul>
<li>vi /etc/nginx/sites-available/default</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">listen</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">default_server</span><span class="p">;</span>
<span class="w">        </span><span class="n">listen</span><span class="w"> </span><span class="p">[::]:</span><span class="mi">80</span><span class="w"> </span><span class="n">default_server</span><span class="p">;</span>

<span class="w">           </span><span class="n">root</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="p">;</span>

<span class="w">        </span><span class="c1"># Add index.php to the list if you are using PHP</span>
<span class="w">        </span><span class="n">index</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="n">html</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="n">htm</span><span class="w"> </span><span class="n">index</span><span class="o">.</span><span class="n">nginx</span><span class="o">-</span><span class="n">debian</span><span class="o">.</span><span class="n">html</span><span class="p">;</span>

<span class="w">        </span><span class="n">server_name</span><span class="w"> </span><span class="n">_</span><span class="p">;</span>

<span class="w">        </span><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="nb">min</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="c1"># First attempt to serve request as file, then</span>
<span class="w">                </span><span class="c1"># as directory, then fall back to displaying a 404.</span>
<span class="w">                </span><span class="c1">#try_files $uri $uri/ =404;</span>
<span class="w">                </span><span class="n">proxy_pass</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">10.224</span><span class="o">.</span><span class="mf">112.66</span><span class="p">:</span><span class="mi">8080</span><span class="p">;</span>
<span class="w">                </span><span class="n">proxy_redirect</span><span class="w"> </span><span class="n">off</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">location</span><span class="w"> </span><span class="o">/</span><span class="k">static</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">alias</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">walter</span><span class="o">/</span><span class="n">pims</span><span class="o">/</span><span class="k">static</span><span class="o">/</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w">    </span>
<span class="w">   </span><span class="p">}</span>
</code></pre></div>

<p>then reload the configuration</p>
<div class="highlight"><pre><span></span><code><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="n">reload</span>
</code></pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/journal.html">journal</a>
      <a href="./tag/blog.html">blog</a>
    </p>
  </div>






<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'wfblog';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

<footer>
<p>&copy; 2010 ~ 2030  Walter Fan <a href="https://beian.miit.gov.cn" target="_blank">皖ICP备20001876号-1</a></p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p><!-- StatusCake -->

<!-- End StatusCake --></footer>  </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Walter Fan's Blog ",
  "url" : ".",
  "image": "./images/walterfan.jpg",
  "description": "an old programmer never die, he just branch to a new address."
}
</script>
</body>
</html>